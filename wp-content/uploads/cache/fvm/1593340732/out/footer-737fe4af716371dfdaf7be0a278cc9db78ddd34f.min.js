/* https://dfcommunity.win/go/wp-content/themes/Nebula-master/assets/js/nebula.js */
try{
window.performance.mark('nebula_inside_nebulajs');jQuery.noConflict();jQuery(function(){window.performance.mark('nebula_dom_ready_start');nebula.cacheSelectors();nebula.helpers();nebula.svgImgs();nebula.errorMitigation();nebula.subnavExpanders();nebula.menuSearchReplacement();nebula.singleResultDrawer();nebula.pageSuggestion();nebula.liveValidator();nebula.cf7Functions();nebula.cf7LocalStorage();nebula.socialSharing();nebula.animationTriggers();nebula.scrollTo();nebula.visibilityChangeActions();nebula.dom.document.on('visibilitychange',function(){nebula.visibilityChangeActions()});nebula.eventTracking();window.performance.mark('nebula_dom_ready_end');window.performance.measure('nebula_dom_ready_functions','nebula_dom_ready_start','nebula_dom_ready_end')});jQuery(window).on('load',function(){window.performance.mark('nebula_window_load_start');nebula.cacheSelectors();nebula.initBootstrapFunctions();nebula.performanceMetrics();nebula.lazyLoadAssets();nebula.initVideoTracking();nebula.overflowDetector();nebula.wpSearchInput();nebula.mobileSearchPlaceholder();nebula.autocompleteSearchListeners();nebula.searchValidator();nebula.searchTermHighlighter();nebula.addressAutocomplete('#address-autocomplete','nebulaGlobalAddressAutocomplete');nebula.facebookSDK();nebula.battery();nebula.networkConnection();nebula.lastWindowWidth=nebula.dom.window.width();jQuery('a, li, tr').removeClass('hover');nebula.dom.html.addClass('loaded');nebula.registerServiceWorker();nebula.predictiveCacheListeners();nebula.networkAvailable();nebula.dom.window.on('offline online',function(){nebula.networkAvailable()});nebula.cookieNotification();window.performance.mark('nebula_window_load_end');window.performance.measure('nebula_window_load_functions','nebula_window_load_start','nebula_window_load_end');window.performance.measure('nebula_window_loaded','navigationStart','nebula_window_load_end')});window.addEventListener('resize',function(){nebula.throttle(function(){if(typeof nebula.lastWindowWidth!=='undefined'&&nebula.dom.window.width()!=nebula.lastWindowWidth){nebula.lastWindowWidth=nebula.dom.window.width();nebula.mobileSearchPlaceholder()}},1000,'window resize')});nebula.regex={email:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i,phone:/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/,address:/^\d{1,6}\s+.{2,25}\b(avenue|ave|court|ct|street|st|drive|dr|lane|ln|road|rd|blvd|plaza|parkway|pkwy)[.,]?[^a-z]/i,date:{mdy:/^((((0[13578])|([13578])|(1[02]))[.\/-](([1-9])|([0-2][0-9])|(3[01])))|(((0[469])|([469])|(11))[.\/-](([1-9])|([0-2][0-9])|(30)))|((2|02)[.\/-](([1-9])|([0-2][0-9]))))[.\/-]((1|2)\d{3}|\d{2})$/,ymd:/^((1|2)\d{3}|\d{2})[.\/-]((((0[13578])|([13578])|(1[02]))[.\/-](([1-9])|([0-2][0-9])|(3[01])))|(((0[469])|([469])|(11))[.\/-](([1-9])|([0-2][0-9])|(30)))|((2|02)[.\/-](([1-9])|([0-2][0-9]))))$/,},hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/,ip:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,url:/(\(?(?:(http|https|ftp):\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#\[\]]*))?([\#][^\s\n]*)?\)?)/i,};nebula.timings=[];nebula.videos={};nebula.scroll={offset:0,speed:500};nebula.cacheSelectors=function(){nebula.dom={document:jQuery(document),window:jQuery(window),html:jQuery('html'),body:jQuery('body'),}};nebula.registerServiceWorker=function(){jQuery('.nebula-sw-install-button').addClass('inactive');if(nebula.site.options.sw&&'serviceWorker' in navigator){window.performance.mark('nebula_sw_registration_start');navigator.serviceWorker.register(nebula.site.sw_url).then(function(registration){window.performance.mark('nebula_sw_registration_end');window.performance.measure('nebula_sw_registration','nebula_sw_registration_start','nebula_sw_registration_end');if(nebula.dom.html.hasClass('debug')){registration.unregister();return!1}
registration.onupdatefound=function(){registration.installing.onstatechange=function(){if(registration.installing){switch(registration.installing.state){case 'installed':if(navigator.serviceWorker.controller){}else{}
break;case 'redundant':ga('send','exception',{'exDescription':'(JS) The installing service worker became redundant.','exFatal':!1});break}}}};navigator.serviceWorker.addEventListener('message',function(event){nebula.dom.document.trigger('nebula_sw_message',event.data)});return navigator.serviceWorker.ready}).catch(function(error){ga('send','exception',{'exDescription':'(JS) ServiceWorker registration failed: '+error,'exFatal':!1})});window.addEventListener('beforeinstallprompt',function(event){event.preventDefault();var installPromptEvent=event;jQuery('.nebula-sw-install-button').removeClass('inactive').addClass('ready')});nebula.dom.document.on('click','.nebula-sw-install-button',function(){if(typeof installPromptEvent!=='undefined'){jQuery('.nebula-sw-install-button').removeClass('ready').addClass('prompted');installPromptEvent.prompt();var thisEvent={category:'Progressive Web App',action:'Install Prompt Shown',label:event.platforms.join(', '),};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);installPromptEvent.userChoice.then(function(result){jQuery('.nebula-sw-install-button').removeClass('prompted').addClass('ready');var thisEvent={category:'Progressive Web App',action:'Install Prompt User Choice',result:result,outcome:result.outcome,};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.outcome);nebula.nv('event','Install Prompt '+thisEvent.outcome)})}else{jQuery('.nebula-sw-install-button').removeClass('ready').addClass('inactive')}
return!1});window.addEventListener('appinstalled',function(){jQuery('.nebula-sw-install-button').removeClass('ready').addClass('success');var thisEvent={category:'Progressive Web App',action:'App Installed',label:'The app has been installed',};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label)});if(nebula.get('debug')){if('caches' in window){caches.keys().then(function(names){for(let name of names){caches.delete(name)}})}}}};nebula.predictiveCacheListeners=function(){if(jQuery('.first-post .entry-title a').length){nebula.prefetch(jQuery('.first-post .entry-title a').attr('href'))}
var predictiveHoverTimeout;jQuery('a').on('mouseenter',function(){var oThis=jQuery(this);var url=oThis.attr('href');if(url&&!predictiveHoverTimeout){predictiveHoverTimeout=window.setTimeout(function(){predictiveHoverTimeout=null;nebula.prefetch(url)},250)}},function(){if(predictiveHoverTimeout){window.clearTimeout(predictiveHoverTimeout);predictiveHoverTimeout=null}});if(typeof window.requestIdleCallback==='function'){window.requestIdleCallback(function(){jQuery('ul#menu-primary > li.menu-item > a').each(function(){nebula.prefetch(jQuery(this).attr('href'),!1,jQuery(this))});jQuery('a.btn, a.wp-block-button__link').slice(0,4).each(function(){nebula.prefetch(jQuery(this).attr('href'),!1,jQuery(this))})})}};nebula.prefetch=function(url,callback,element){if(url&&url.length>1&&url.indexOf('#')!==0&&typeof window.requestIdleCallback==='function'){if(nebula.has(navigator,'connection.effectiveType')&&navigator.connection.effectiveType.toString().indexOf('2g')>=0){return!1}
if(nebula.has(navigator,'connection.saveData')){if(navigator.connection.saveData){return!1}}
if(element&&jQuery(element).is('[download]')){return!1}
if(!/^https/.test(url)){return!1}
if(/\.(?:pdf|docx?|xlsx?|pptx?|zipx?|rar|tar|txt|rtf|ics|vcard)/.test(url)){return!1}
url=url.split('#')[0];var prefetchBlocklist=['logout'];jQuery.each(prefetchBlocklist,function(index,value){if(url.indexOf(value)!=-1){return!1}});window.requestIdleCallback(function(){if(!jQuery('link[rel="prefetch"][href="'+url+'"]').length){jQuery('<link rel="prefetch" href="'+url+'">').on('load',callback).appendTo('head')}})}};nebula.postMessage=function(data){if(navigator.serviceWorker&&navigator.serviceWorker.controller){navigator.serviceWorker.controller.postMessage(data)}};nebula.cookieNotification=function(){if(jQuery('#nebula-cookie-notification').length&&!nebula.readCookie('acceptcookies')){window.requestAnimationFrame(function(){jQuery('#nebula-cookie-notification').addClass('active');if(!nebula.dom.body.hasClass('desktop')){jQuery('#nebula-cookie-notification').css({position:'absolute',bottom:'auto',top:window.innerHeight-jQuery('#nebula-cookie-notification').outerHeight()-40,})}});jQuery(document).on('click','#nebula-cookie-accept',function(){nebula.createCookie('acceptcookies',!0);window.requestAnimationFrame(function(){jQuery('#nebula-cookie-notification').removeClass('active')});return!1})}};nebula.networkAvailable=function(){if(navigator.onLine){nebula.dom.body.removeClass('offline');if('localStorage' in window){localStorage.setItem('network_connection','online')}}else{nebula.dom.body.addClass('offline');if('localStorage' in window){localStorage.setItem('network_connection','offline')}}
nebula.dom.document.trigger('nebula_network_change')};nebula.visibilityChangeActions=function(){if(document.visibilityState==='prerender'){ga('send','event','Page Visibility','Prerendered','Page loaded before tab/window was visible',{'nonInteraction':!0});nebula.pauseAllVideos(!1)}
if(document.visibilitystate==='hidden'){nebula.dom.document.trigger('nebula_page_hidden');nebula.dom.body.addClass('page-visibility-hidden');nebula.pauseAllVideos(!1)}else{nebula.networkAvailable();nebula.dom.document.trigger('nebula_page_visible');nebula.dom.body.removeClass('page-visibility-hidden')}};nebula.performanceMetrics=function(){if((nebula.get('timings')||(nebula.has(nebula,'user.staff')&&nebula.user.staff==='developer'))){if(window.performance&&window.performance.timing&&typeof window.requestIdleCallback==='function'){window.requestIdleCallback(function(){window.performance.mark('nebula_cpu_idle');window.performance.measure('nebula_until_cpu_idle','navigationStart','nebula_cpu_idle');var timingCalcuations={'Redirect':{start:Math.round(performance.timing.redirectStart-performance.timing.navigationStart),duration:Math.round(performance.timing.redirectEnd-performance.timing.redirectStart)},'Unload':{start:Math.round(performance.timing.unloadStart-performance.timing.navigationStart),duration:Math.round(performance.timing.unloadEnd-performance.timing.unloadStart)},'App Cache':{start:Math.round(performance.timing.fetchStart-performance.timing.navigationStart),duration:Math.round(performance.timing.domainLookupStart-performance.timing.fetchStart)},'DNS':{start:Math.round(performance.timing.domainLookupStart-performance.timing.navigationStart),duration:Math.round(performance.timing.domainLookupEnd-performance.timing.domainLookupStart)},'TCP':{start:Math.round(performance.timing.connectStart-performance.timing.navigationStart),duration:Math.round(performance.timing.connectEnd-performance.timing.connectStart)},'Request':{start:Math.round(performance.timing.requestStart-performance.timing.navigationStart),duration:Math.round(performance.timing.responseStart-performance.timing.requestStart)},'Response':{start:Math.round(performance.timing.responseStart-performance.timing.navigationStart),duration:Math.round(performance.timing.responseEnd-performance.timing.responseStart)},'Processing':{start:Math.round(performance.timing.domLoading-performance.timing.navigationStart),duration:Math.round(performance.timing.loadEventStart-performance.timing.domLoading)},'onLoad':{start:Math.round(performance.timing.loadEventStart-performance.timing.navigationStart),duration:Math.round(performance.timing.loadEventEnd-performance.timing.loadEventStart)},'DOM Ready':{start:0,duration:Math.round(performance.timing.domComplete-performance.timing.navigationStart)},'Total Load':{start:0,duration:Math.round(performance.timing.loadEventEnd-performance.timing.navigationStart)},'CPU Idle':{start:0,duration:Math.round(Date.now()-performance.timing.navigationStart)}};if(typeof console.table==='function'){var clientTimings={};jQuery.each(timingCalcuations,function(name,timings){if(!isNaN(timings.duration)&&timings.duration>0&&timings.duration<6000000){clientTimings[name]={start:timings.start,duration:timings.duration,elapsed:timings.start+timings.duration}}});console.groupCollapsed('Performance');console.table(jQuery.extend(nebula.site.timings,clientTimings));console.groupEnd()}
if(timingCalcuations.Processing&&timingCalcuations['DOM Ready']&&timingCalcuations['Total Load']){ga('set',nebula.analytics.metrics.serverResponseTime,timingCalcuations.Processing.start);ga('set',nebula.analytics.metrics.domReadyTime,timingCalcuations['DOM Ready'].duration);ga('set',nebula.analytics.metrics.windowLoadedTime,timingCalcuations['Total Load'].duration);ga('send','event','Performance Timing','track','Used to deliver performance metrics to Google Analytics',{'nonInteraction':!0});ga('send','timing','Performance Timing','Server Response',timingCalcuations.Processing.start,'Navigation start until server response finishes (includes PHP execution time)');ga('send','timing','Performance Timing','DOM Ready',timingCalcuations['DOM Ready'].duration,'Navigation start until DOM ready');ga('send','timing','Performance Timing','Window Load',timingCalcuations['Total Load'].duration,'Navigation start until window load');ga('send','timing','Performance Timing','CPU Idle',timingCalcuations['CPU Idle'].duration,'Navigation start until CPU idle')}})}}};nebula.overflowDetector=function(){jQuery('.menu li.menu-item').on({'mouseenter focus focusin':function(){if(jQuery(this).children('.sub-menu').length){var submenuLeft=jQuery(this).children('.sub-menu').offset().left;var submenuRight=submenuLeft+jQuery(this).children('.sub-menu').width();if(submenuRight>nebula.dom.window.width()){jQuery(this).children('.sub-menu').addClass('overflowing overflowing-left')}else if(submenuLeft>nebula.dom.window.width()){jQuery(this).children('.sub-menu').addClass('overflowing overflowing-right')}else{jQuery(this).children('.sub-menu').removeClass('overflowing overflowing-left overflowing-right')}}},'mouseleave':function(){jQuery(this).children('.sub-menu').removeClass('overflowing')}})};nebula.isDoNotTrack=function(){if(nebula.has(nebula,'user.dnt')){if(nebula.user.dnt==1){return!0}else{return!1}}
if(window.doNotTrack||navigator.doNotTrack||navigator.msDoNotTrack||'msTrackingProtectionEnabled' in window.external){if(window.doNotTrack=="1"||navigator.doNotTrack=="yes"||navigator.doNotTrack=="1"||navigator.msDoNotTrack=="1"||window.external.msTrackingProtectionEnabled()){return!0}else{return!1}}
return!1};nebula.battery=function(){nebula.user.client.device.battery=!1;if('getBattery' in navigator){navigator.getBattery().then(function(battery){nebula.batteryData(battery);jQuery(battery).on('chargingchange levelchange',function(){nebula.batteryData(battery)})})}};nebula.batteryData=function(battery){if(battery){nebula.user.client.device.battery={mode:(battery.charging)?'Adapter':'Battery',charging:(battery.charging)?!0:!1,chargingTime:battery.chargingTime,dischargingTime:battery.dischargingTime,level:battery.level,percentage:parseFloat((battery.level*100).toFixed(0))+'%',};ga('set',nebula.analytics.dimensions.batteryMode,nebula.user.client.device.battery.mode);ga('set',nebula.analytics.dimensions.batteryPercent,nebula.user.client.device.battery.percentage);ga('set',nebula.analytics.metrics.batteryLevel,nebula.user.client.device.battery.level);nebula.dom.document.trigger('batteryChange')}};nebula.networkConnection=function(){var connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection||!1;if(connection){nebula.user.client.device.connection={type:connection.type,metered:connection.metered,bandwidth:connection.bandwidth,}}};nebula.facebookSDK=function(){if(jQuery('[class*="fb-"]:not(.fb-root)').length||jQuery('.require-fbsdk').length){(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src='https://connect.facebook.net/'+nebula.site.charset+'/all.js#xfbml=1&version=v3.0';fjs.parentNode.insertBefore(js,fjs)}(document,'script','facebook-jssdk'))}};nebula.socialSharing=function(){if(jQuery('.fbshare, a.nebula-share.facebook, .twshare, a.nebula-share-btn.twitter, .lishare, a.nebula-share-btn.linkedin, .pinshare, a.nebula-share-btn.pinterest, .emshare, a.nebula-share-btn.email, a.nebula-share.webshare, a.nebula-share.shareapi').length){var encloc=encodeURIComponent(window.location.href);var enctitle=encodeURIComponent(document.title);var popupTop=nebula.dom.window.height()/2-275;var popupLeft=nebula.dom.window.width()/2-225;var popupAttrs='top='+popupTop+', left='+popupLeft+', toolbar=0, location=0, menubar=0, directories=0, scrollbars=0, chrome=yes, personalbar=0';jQuery('.fbshare, a.nebula-share.facebook').attr('href','https://www.facebook.com/sharer.php?u='+encloc+'&t='+enctitle).attr({'target':'_blank','rel':'noopener'}).on('click',function(e){var thisEvent={event:e,category:'Social',action:'Share',intent:'Intent',network:'Facebook',url:window.location.href,title:document.title};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.network);nebula.nv('event',thisEvent.network+' '+thisEvent.action);if(nebula.dom.body.hasClass('desktop')){window.open(jQuery(this).attr('href'),'facebookShareWindow','width=550, height=450, '+popupAttrs);return!1}});jQuery('.twshare, a.nebula-share-btn.twitter').attr('href','https://twitter.com/intent/tweet?url='+encloc+'&text='+enctitle).attr({'target':'_blank','rel':'noopener'}).on('click',function(e){var thisEvent={event:e,category:'Social',action:'Share',intent:'Intent',network:'Twitter',url:window.location.href,title:document.title};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.network);nebula.nv('event',thisEvent.network+' '+thisEvent.action);if(nebula.dom.body.hasClass('desktop')){window.open(jQuery(this).attr('href'),'twitterShareWindow','width=600, height=254, '+popupAttrs);return!1}});jQuery('.lishare, a.nebula-share-btn.linkedin').attr('href','https://www.linkedin.com/shareArticle?mini=true&url='+encloc+'&title='+enctitle).attr({'target':'_blank','rel':'noopener'}).on('click',function(e){var thisEvent={event:e,category:'Social',action:'Share',intent:'Intent',network:'LinkedIn',url:window.location.href,title:document.title};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.network);nebula.nv('event',thisEvent.network+' '+thisEvent.action);if(nebula.dom.body.hasClass('desktop')){window.open(jQuery(this).attr('href'),'linkedinShareWindow','width=600, height=473, '+popupAttrs);return!1}});jQuery('.pinshare, a.nebula-share-btn.pinterest').attr('href','https://pinterest.com/pin/create/button/?url='+encloc).attr({'target':'_blank','rel':'noopener'}).on('click',function(e){var thisEvent={event:e,category:'Social',action:'Share',intent:'Intent',network:'Pinterest',url:window.location.href,title:document.title};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.network);nebula.nv('event',thisEvent.network+' '+thisEvent.action);if(nebula.dom.body.hasClass('desktop')){window.open(jQuery(this).attr('href'),'pinterestShareWindow','width=600, height=450, '+popupAttrs);return!1}});jQuery('.emshare, a.nebula-share-btn.email').attr('href','mailto:?subject='+enctitle+'&body='+encloc).attr({'target':'_blank','rel':'noopener'}).on('click',function(e){var thisEvent={event:e,category:'Social',action:'Share',intent:'Intent',network:'Email',url:window.location.href,title:document.title};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.network);nebula.nv('event',thisEvent.network+' '+thisEvent.action)});if('share' in navigator&&!nebula.dom.body.hasClass('desktop')){nebula.dom.document.on('click','a.nebula-share.webshare, a.nebula-share.shareapi',function(){var oThis=jQuery(this);navigator.share({title:document.title,text:nebula.post.excerpt,url:window.location.href}).then(function(){var thisEvent={event:e,category:'Social',action:'Share',intent:'Intent',network:'Web Share API',url:window.location.href,title:document.title,};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.network);nebula.nv('event',thisEvent.network);oThis.addClass('success');nebula.createCookie('shareapi',!0)}).catch(function(error){ga('send','exception',{'exDescription':'(JS) Share API Error: '+error,'exFatal':!1});oThis.addClass('error').text('Sharing Error');nebula.createCookie('shareapi',!1)});return!1});nebula.createCookie('shareapi',!0)}else{jQuery('a.nebula-share.webshare, a.nebula-share.shareapi').addClass('hidden')}}};nebula.eventTracking=function(){if(nebula.isDoNotTrack()){return!1}
nebula.cacheSelectors();if(typeof window.ga==='function'){window.ga(function(tracker){nebula.dom.document.trigger('nebula_ga_tracker',tracker);nebula.user.cid=tracker.get('clientId')})}
nebula.dom.document.trigger('nebula_event_tracking');nebula.once(function(){window.dataLayer=window.dataLayer||[];nebula.dom.document.on('mousedown',"button, .btn, [role='button'], a.wp-block-button__link, .hs-button",function(e){var thisEvent={event:e,category:'Button',action:'Click',intent:(e.which>=2)?'Intent':'Explicit',text:jQuery(this).val()||jQuery(this).text()||'(Unknown)',link:jQuery(this).attr('href')};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event','Button Click',thisEvent.text.trim(),thisEvent.link);window.dataLayer.push({'event':'nebula-button-click','nebula-event':thisEvent})});nebula.dom.document.on('shown.bs.collapse',function(e){var thisEvent={event:e,category:'Accordion',action:'Shown',label:jQuery('[data-target="#'+e.target.id+'"]').text().trim()||e.target.id,};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-accordion-shown','nebula-event':thisEvent})});nebula.dom.document.on('hidden.bs.collapse',function(e){var thisEvent={event:e,category:'Accordion',action:'Hidden',label:jQuery('[data-target="#'+e.target.id+'"]').text().trim()||e.target.id,};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-accordion-hidden','nebula-event':thisEvent})});nebula.dom.document.on('shown.bs.modal',function(e){var thisEvent={event:e,category:'Modal',action:'Shown',label:jQuery('#'+e.target.id+' .modal-title').text().trim()||e.target.id,};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-modal-shown','nebula-event':thisEvent})});nebula.dom.document.on('hidden.bs.modal',function(e){var thisEvent={event:e,category:'Modal',action:'Hidden',label:jQuery('#'+e.target.id+' .modal-title').text().trim()||e.target.id,};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-modal-hidden','nebula-event':thisEvent})});nebula.dom.document.on('slide.bs.carousel',function(e){if(window.event){var thisEvent={event:e,category:'Carousel',action:e.target.id||e.target.title||e.target.className.replace(/\s/g,'.'),from:e.from,to:e.to,};thisEvent.activeSlide=jQuery(e.target).find('.carousel-item').eq(e.to);thisEvent.activeSlideName=thisEvent.activeSlide.attr('id')||thisEvent.activeSlide.attr('title')||'Unnamed';thisEvent.prevSlide=jQuery(e.target).find('.carousel-item').eq(e.from);thisEvent.prevSlideName=thisEvent.prevSlide.attr('id')||thisEvent.prevSlide.attr('title')||'Unnamed';thisEvent.label='Slide to '+thisEvent.to+' ('+thisEvent.activeSlideName+') from '+thisEvent.from+' ('+thisEvent.prevSlideName+')';nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-carousel-slide','nebula-event':thisEvent})}});nebula.dom.document.on('submit','form',function(e){var thisEvent={event:e,category:'Generic Form',action:'Submit',formID:e.target.id||'form.'+e.target.className.replace(/\s/g,'.'),};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.formID);window.dataLayer.push({'event':'nebula-generic-form','nebula-event':thisEvent})});jQuery.each(['pdf','doc','docx','xls','xlsx','ppt','pptx','csv','zip','zipx','rar','gz','tar','txt','rtf','ics','vcard'],function(index,extension){nebula.dom.document.on('mousedown',"a[href$='."+extension+"'], a[href$='."+extension.toUpperCase()+"']",function(e){var thisEvent={event:e,category:'Download',action:extension,intent:(e.which>=2)?'Intent':'Explicit',extension:extension,fileName:jQuery(this).attr('href').substr(jQuery(this).attr('href').lastIndexOf("/")+1),};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.fileName);window.dataLayer.push({'event':'nebula-download','nebula-event':thisEvent});if(typeof fbq==='function'){fbq('track','ViewContent',{content_name:thisEvent.fileName})}
nebula.nv('event','File Download')})});nebula.dom.document.on('mousedown',".notable a, a.notable",function(e){var thisEvent={event:e,category:'Download',action:'Notable',intent:(e.which>=2)?'Intent':'Explicit',filePath:jQuery(this).attr('href').trim(),linkText:jQuery(this).text()};if(thisEvent.filePath.length&&thisEvent.filePath!=='#'){thisEvent.fileName=filePath.substr(filePath.lastIndexOf("/")+1);ga('set',nebula.analytics.metrics.notableDownloads,1);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.fileName);window.dataLayer.push({'event':'nebula-download','nebula-event':thisEvent});if(typeof fbq==='function'){fbq('track','ViewContent',{content_name:thisEvent.fileName})}
nebula.nv('event','Notable File Download')}});nebula.dom.document.on('submit','#s, input.search',function(){var thisEvent={event:e,category:'Internal Search',action:'Submit',intent:(e.which>=2)?'Intent':'Explicit',query:jQuery(this).find('input[name="s"]').val().toLowerCase().trim()};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.query);window.dataLayer.push({'event':'nebula-internal-search','nebula-event':thisEvent});if(typeof fbq==='function'){fbq('track','Search',{search_string:thisEvent.query})}
nebula.nv('identify',{internal_search:thisEvent.query})});nebula.dom.document.on('keydown',function(e){if((e.ctrlKey||e.metaKey)&&e.which===70){var thisEvent={event:e,category:'Keyboard Shortcut',action:'Find on Page (Ctrl+F)',highlightedText:window.getSelection().toString().trim()||'(No highlighted text when initiating find)'};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.highlightedText,{'nonInteraction':!0});window.dataLayer.push({'event':'nebula-keyboard-shortcut','nebula-event':thisEvent})}
if((e.ctrlKey||e.metaKey)&&e.which===68){var thisEvent={event:e,category:'Keyboard Shortcut',action:'Bookmark (Ctrl+D)',label:'User bookmarked the page (with keyboard shortcut)'};nebula.removeQueryParameter(['utm_campaign','utm_medium','utm_source','utm_content','utm_term'],window.location.href);history.replaceState(null,document.title,window.location.href+'?utm_source=bookmark');nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label,{'nonInteraction':!0});window.dataLayer.push({'event':'nebula-keyboard-shortcut','nebula-event':thisEvent})}});nebula.dom.document.on('mousedown','a[href^="mailto"]',function(e){var thisEvent={event:e,category:'Contact',action:'Mailto',intent:(e.which>=2)?'Intent':'Explicit',emailAddress:jQuery(this).attr('href').replace('mailto:','')};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);ga('set',nebula.analytics.dimensions.contactMethod,thisEvent.action);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.emailAddress);window.dataLayer.push({'event':'nebula-mailto','nebula-event':thisEvent});if(typeof fbq==='function'){if(typeof fbq==='function'){fbq('track','Lead',{content_name:thisEvent.action})}}
nebula.nv('event',thisEvent.action);nebula.nv('identify',{mailto_contacted:thisEvent.emailAddress})});nebula.dom.document.on('mousedown','a[href^="tel"]',function(e){var thisEvent={event:e,category:'Contact',action:'Click-to-Call',intent:(e.which>=2)?'Intent':'Explicit',phoneNumber:jQuery(this).attr('href').replace('tel:','')};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);ga('set',nebula.analytics.dimensions.contactMethod,thisEvent.action);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.phoneNumber);window.dataLayer.push({'event':'nebula-click-to-call','nebula-event':thisEvent});if(typeof fbq==='function'){if(typeof fbq==='function'){fbq('track','Lead',{content_name:thisEvent.action})}}
nebula.nv('event',thisEvent.action);nebula.nv('identify',{phone_contacted:thisEvent.phoneNumber})});nebula.dom.document.on('mousedown','a[href^="sms"]',function(e){var thisEvent={event:e,category:'Contact',action:'SMS',intent:(e.which>=2)?'Intent':'Explicit',phoneNumber:jQuery(this).attr('href').replace('tel:','')};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);ga('set',nebula.analytics.dimensions.contactMethod,thisEvent.action);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.phoneNumber);window.dataLayer.push({'event':'nebula-sms','nebula-event':thisEvent});if(typeof fbq==='function'){if(typeof fbq==='function'){fbq('track','Lead',{content_name:thisEvent.action})}}
nebula.nv('event',thisEvent.action);nebula.nv('identify',{phone_contacted:thisEvent.phoneNumber})});nebula.dom.document.on('mousedown','#utility-nav ul.menu a',function(e){var thisEvent={event:e,category:'Navigation Menu',action:'Utility Menu',intent:(e.which>=2)?'Intent':'Explicit',linkText:jQuery(this).text().trim()};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.linkText);window.dataLayer.push({'event':'nebula-navigation-menu-click','nebula-event':thisEvent})});nebula.dom.document.on('mousedown','#primary-nav ul.menu a',function(e){var thisEvent={event:e,category:'Navigation Menu',action:'Primary Menu',intent:(e.which>=2)?'Intent':'Explicit',linkText:jQuery(this).text().trim()};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.linkText);window.dataLayer.push({'event':'nebula-navigation-menu-click','nebula-event':thisEvent})});nebula.dom.document.on('mousedown','#mobilenav ul.menu a.mm-listitem__text',function(e){var thisEvent={event:e,category:'Navigation Menu',action:'Mobile Menu',intent:(e.which>=2)?'Intent':'Explicit',linkText:jQuery(this).text().trim()};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.linkText);window.dataLayer.push({'event':'nebula-navigation-menu-click','nebula-event':thisEvent})});nebula.dom.document.on('mousedown','ol.nebula-breadcrumbs a',function(e){var thisEvent={event:e,category:'Navigation Menu',action:'Breadcrumbs',intent:(e.which>=2)?'Intent':'Explicit',linkText:jQuery(this).text().trim()};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.linkText);window.dataLayer.push({'event':'nebula-navigation-menu-click','nebula-event':thisEvent})});nebula.dom.document.on('mousedown','#sidebar-section ul.menu a',function(e){var thisEvent={event:e,category:'Navigation Menu',action:'Sidebar Menu',intent:(e.which>=2)?'Intent':'Explicit',linkText:jQuery(this).text().trim()};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.linkText);window.dataLayer.push({'event':'nebula-navigation-menu-click','nebula-event':thisEvent})});nebula.dom.document.on('mousedown','#powerfooter ul.menu a',function(e){var thisEvent={event:e,category:'Navigation Menu',action:'Footer Menu',intent:(e.which>=2)?'Intent':'Explicit',linkText:jQuery(this).text().trim()};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.linkText);window.dataLayer.push({'event':'nebula-navigation-menu-click','nebula-event':thisEvent})});nebula.dom.document.on('mousedown','#nebula-cookie-notification a',function(e){var thisEvent={event:e,category:'Cookie Notification',action:'Click',intent:(e.which>=2)?'Intent':'Explicit',text:jQuery(this).text(),link:jQuery(this).attr('href')};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.text.trim(),thisEvent.link,{'nonInteraction':!0});window.dataLayer.push({'event':'nebula-cookie-notification-click','nebula-event':thisEvent})});nebula.dom.window.on('popstate',function(e){var thisEvent={event:e,category:'History Popstate',action:document.title,location:document.location,state:JSON.stringify(e.state)};ga('send','event',thisEvent.category,thisEvent.action,thisEvent.location)});jQuery(document).on('click','img',function(e){if(!jQuery(this).parents('a, button').length){var thisEvent={event:e,category:'Non-Linked Click Attempt',action:'Image',element:'Image',src:jQuery(this).attr('src')};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.src,{'nonInteraction':!0});window.dataLayer.push({'event':'nebula-non-linked-click-attempt','nebula-event':thisEvent});nebula.nv('event',thisEvent.category)}});var clickEvents=[];nebula.dom.document.on('click','body',function(e){if(jQuery(this).is('input[type="number"]')){return null}
clickEvents.push({event:e,time:new Date()});if(clickEvents.length>5){clickEvents.splice(0,clickEvents.length-5)}
if(clickEvents.length>=5){var numberOfClicks=5;var period=3;var last=clickEvents.length-1;var timeDiff=(clickEvents[last].time.getTime()-clickEvents[last-numberOfClicks+1].time.getTime())/1000;if(timeDiff>period){return null}
var max_distance=0;for(var i=last-numberOfClicks+1;i<last;i++){for(var j=i+1;j<=last;j++){var distance=Math.round(Math.sqrt(Math.pow(clickEvents[i].event.clientX-clickEvents[j].event.clientX,2)+Math.pow(clickEvents[i].event.clientY-clickEvents[j].event.clientY,2)));if(distance>max_distance){max_distance=distance}
if(distance>100){return null}}}
var thisEvent={event:e,category:'Rage Clicks',action:'Detected',clicks:numberOfClicks,period:timeDiff,selector:nebula.domTreeToString(e.target),};thisEvent.description=numberOfClicks+' clicks in '+timeDiff+' seconds detected within '+max_distance+'px of '+thisEvent.selector;nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.description,{'nonInteraction':!0});window.dataLayer.push({'event':'nebula-rage-click','nebula-event':thisEvent});clickEvents.splice(clickEvents.length-5,5)}});nebula.dom.document.on('focus','.sr-only',function(e){var thisEvent={event:e,category:'Accessibility Links',action:'Focus',linkText:jQuery(this).text().trim()};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.linkText);window.dataLayer.push({'event':'nebula-accessibility-link','nebula-event':thisEvent})});nebula.dom.document.on('click','.sr-only',function(e){var thisEvent={event:e,category:'Accessibility Links',action:'Click',intent:(e.which>=2)?'Intent':'Explicit',linkText:jQuery(this).text().trim()};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.linkText);window.dataLayer.push({'event':'nebula-accessibility-link','nebula-event':thisEvent})});nebula.dom.document.on('enterpictureinpicture','video',function(e){var thisEvent={event:e,category:'Videos',action:'Enter Picture-in-Picture',videoID:e.target.id};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.videoID,{'nonInteraction':!0})});nebula.dom.document.on('leavepictureinpicture','video',function(e){var thisEvent={event:e,category:'Videos',action:'Leave Picture-in-Picture',videoID:e.target.id};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.videoID,{'nonInteraction':!0})});var copyCount=0;nebula.dom.document.on('cut copy',function(){var selection=window.getSelection().toString();var words=selection.split(' ');var wordsLength=words.length;var emailPhoneAddress=words.join(' ').trim();if(nebula.regex.email.test(emailPhoneAddress)){var thisEvent={category:'Contact',action:'Email (Copy)',intent:'Intent',emailAddress:emailPhoneAddress,selection:selection,words:words,wordcount:wordsLength};ga('set',nebula.analytics.dimensions.contactMethod,'Mailto');ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.emailAddress);nebula.nv('event','Email Address Copied');nebula.nv('identify',{mailto_contacted:thisEvent.emailAddress})}else if(nebula.regex.address.test(emailPhoneAddress)){var thisEvent={category:'Contact',action:'Street Address (Copy)',intent:'Intent',address:emailPhoneAddress,selection:selection,words:words,wordcount:wordsLength};ga('set',nebula.analytics.dimensions.contactMethod,'Street Address');ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.address);nebula.nv('event','Street Address Copied')}else{var alphanumPhone=emailPhoneAddress.replace(/\W/g,'');var firstFourNumbers=parseInt(alphanumPhone.substring(0,4));if((!isNaN(firstFourNumbers)&&firstFourNumbers.toString().length>=3&&(alphanumPhone.length===10||alphanumPhone.length===11))||nebula.regex.phone.test(emailPhoneAddress)){var thisEvent={category:'Contact',action:'Phone (Copy)',intent:'Intent',phoneNumber:emailPhoneAddress,selection:selection,words:words,wordcount:wordsLength};ga('set',nebula.analytics.dimensions.contactMethod,'Click-to-Call');ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.phoneNumber);nebula.nv('event','Phone Number Copied');nebula.nv('identify',{phone_contacted:thisEvent.phoneNumber})}}
var thisEvent={category:'Copied Text',action:'Copy',intent:'Intent',phoneNumber:emailPhoneAddress,selection:selection,words:words,wordcount:wordsLength};nebula.dom.document.trigger('nebula_event',thisEvent);if(copyCount<5){if(words.length>8){words=words.slice(0,8).join(' ');ga('send','event',thisEvent.category,words.length+' words',words+'... ['+wordsLength+' words]')}else{if(selection.trim()===''){ga('send','event',thisEvent.category,'[0 words]')}else{ga('send','event',thisEvent.category,words.length+' words',selection,words.length)}}
ga('send','event',thisEvent.category,words.length+' words',words+'... ['+wordsLength+' words]');window.dataLayer.push({'event':'nebula-copied-text','nebula-event':thisEvent});nebula.nv('event','Text Copied')}
copyCount++});nebula.dom.document.ajaxError(function(e,jqXHR,settings,thrownError){var errorMessage=thrownError;if(jqXHR.status===0){errorMessage='Unknown error'}
ga('send','exception',{'exDescription':'(JS) AJAX Error ('+jqXHR.status+'): '+errorMessage+' on '+settings.url,'exFatal':!0});window.dataLayer.push({'event':'nebula-ajax-error','nebula-event':errorMessage});nebula.nv('event','AJAX Error')});window.onerror=function(message,file,line){var errorMessage=message+' at '+line+' of '+file;if(message.toLowerCase().indexOf('script error')>-1){errorMessage='Script error (An error occurred in a script hosted on a different domain)'}
ga('send','exception',{'exDescription':'(JS) '+errorMessage,'exFatal':!1});window.dataLayer.push({'event':'nebula-window-error','nebula-event':errorMessage});nebula.nv('event','JavaScript Error')};if('matchMedia' in window){var mediaQueryList=window.matchMedia('print');mediaQueryList.addListener(function(mql){if(mql.matches){sendPrintEvent('Before Print','mql.matches')}else{sendPrintEvent('After Print','!mql.matches')}})}else{window.onbeforeprint=sendPrintEvent('Before Print','onbeforeprint');window.onafterprint=sendPrintEvent('After Print','onafterprint')}
function sendPrintEvent(action,trigger){var thisEvent={category:'Print',action:action,label:'User triggered print via '+trigger,intent:'Intent'};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-print','nebula-event':thisEvent});nebula.nv('event',thisEvent.category)}
if(nebula.user.client.bot===!1&&nebula.site.options.adblock_detect){window.performance.mark('nebula_detect_adblock_start');jQuery.ajax({type:'GET',url:nebula.site.directory.template.uri+'/assets/js/vendor/show_ads.js',dataType:'script',cache:!0,timeout:5000}).done(function(){nebula.session.flags.adblock=!1}).fail(function(){nebula.dom.html.addClass('ad-blocker');ga('set',nebula.analytics.dimensions.blocker,'Ad Blocker');if(nebula.session.flags.adblock!=!0){ga('send','event','Ad Blocker','Blocked','This user is using ad blocking software.',{'nonInteraction':!0});window.dataLayer.push({'event':'nebula-adblock-detected','nebula-event':thisEvent});nebula.session.flags.adblock=!0}}).always(function(){window.performance.mark('nebula_detect_adblock_end');window.performance.measure('nebula_detect_adblock','nebula_detect_adblock_start','nebula_detect_adblock_end')})}
nebula.dom.document.on('keyup','.dataTables_filter input',function(e){oThis=jQuery(this);var thisEvent={event:e,category:'DataTables',action:'Search Filter',query:oThis.val().toLowerCase().trim()};nebula.debounce(function(){nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.query);window.dataLayer.push({'event':'nebula-datatables','nebula-event':thisEvent})},1000,'datatables_search_filter')});nebula.dom.document.on('click','th.sorting',function(e){var thisEvent={event:e,category:'DataTables',action:'Sort',heading:jQuery(this).text()};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.heading);window.dataLayer.push({'event':'nebula-datables','nebula-event':thisEvent})});nebula.dom.document.on('click','a.paginate_button ',function(e){var thisEvent={event:e,category:'DataTables',action:'Paginate',page:jQuery(this).text()};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.page);window.dataLayer.push({'event':'nebula-datatables','nebula-event':thisEvent})});nebula.dom.document.on('change','.dataTables_length select',function(e){var thisEvent={event:e,category:'DataTables',action:'Shown Entries Change',selected:jQuery(this).val()};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.selected);window.dataLayer.push({'event':'nebula-datatables','nebula-event':thisEvent})});nebula.scrollDepth();nebula.ecommerceTracking()},'nebula event tracking')};nebula.ecommerceTracking=function(){if(nebula.has(nebula,'site.ecommerce')&&nebula.site.ecommerce){nebula.dom.document.on('click','a.add_to_cart, .single_add_to_cart_button',function(e){var thisEvent={event:e,category:'Ecommerce',action:'Add to Cart',product:jQuery(this).attr('data-product_id')};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.product);window.dataLayer.push({'event':'nebula-add-to-cart','nebula-event':thisEvent});if(typeof fbq==='function'){fbq('track','AddToCart')}
nebula.nv('event','Ecommerce Add to Cart')});nebula.dom.document.on('click','.button[name="update_cart"]',function(e){var thisEvent={event:e,category:'Ecommerce',action:'Update Cart Button',label:'Update Cart button click'};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-update-cart','nebula-event':thisEvent});nebula.nv('event','Ecommerce Update Cart')});nebula.dom.document.on('click','.product-remove a.remove',function(e){var thisEvent={event:e,category:'Ecommerce',action:'Remove This Item',product:jQuery(this).attr('data-product_id')};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.product);window.dataLayer.push({'event':'nebula-remove-item','nebula-event':thisEvent});nebula.nv('event','Ecommerce Remove From Cart')});nebula.dom.document.on('click','.wc-proceed-to-checkout .checkout-button',function(e){var thisEvent={event:e,category:'Ecommerce',action:'Proceed to Checkout Button',label:'Proceed to Checkout button click'};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-proceed-to-checkout','nebula-event':thisEvent});if(typeof fbq==='function'){fbq('track','InitiateCheckout')}
nebula.nv('event','Ecommerce Proceed to Checkout')});nebula.dom.document.on('click focus','#billing_first_name',function(e){nebula.timer('ecommerce_checkout','start');var thisEvent={event:e,category:'Ecommerce',action:'Started Checkout Form',label:'Began filling out the checkout form (Billing First Name)'};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-started-checkout-form','nebula-event':thisEvent});nebula.nv('event','Ecommerce Started Checkout Form')});nebula.dom.document.on('click','#place_order',function(e){var thisEvent={event:e,category:'Ecommerce',action:'Place Order Button',label:'Place Order button click'};ga('send','timing','Ecommerce','Checkout Form',Math.round(nebula.timer('ecommerce_checkout','end')),'Billing details start to Place Order button click');nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-place-order-button','nebula-event':thisEvent});if(typeof fbq==='function'){fbq('track','Purchase')}
nebula.nv('event','Ecommerce Placed Order');nebula.nv('identify',{hs_lifecyclestage_customer_date:1})})}};nebula.scrollDepth=function(){if(window.performance){var scrollReady=performance.now();var scrollDepthHandler=function(){nebula.once(function(){nebula.scrollBegin=performance.now()-scrollReady;if(nebula.scrollBegin>250){var thisEvent={category:'Scroll Depth',action:'Began Scrolling',scrollStart:nebula.dom.body.scrollTop()+'px',timeBeforeScrollStart:Math.round(nebula.scrollBegin)};thisEvent.label='Initial scroll started at '+thisEvent.scrollStart;nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.scrollStart,thisEvent.scrollStartTime,{'nonInteraction':!0})}},'begin scrolling');nebula.throttle(function(){if((nebula.dom.window.height()+nebula.dom.window.scrollTop())>=nebula.dom.document.height()){nebula.once(function(){var thisEvent={category:'Scroll Depth',action:'Entire Page',distance:nebula.dom.document.height(),scrollEnd:performance.now()-(nebula.scrollBegin+scrollReady),};thisEvent.timetoScrollEnd=Math.round(thisEvent.scrollEnd);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.distance,thisEvent.timetoScrollEnd,{'nonInteraction':!0});window.removeEventListener('scroll',scrollDepthHandler)},'end scrolling')}},1000,'scroll depth')};window.addEventListener('scroll',scrollDepthHandler)}};nebula.isInViewport=function(element,offset){return nebula.isInView(element,offset)};nebula.isInView=function(element,offset){if(element){if(typeof element==='string'){element=jQuery(element)}
if(!offset){offset=1}
var elementTop=element.offset().top;var elementBottom=element.offset().top+element.innerHeight();var windowTop=nebula.dom.document.scrollTop();var windowBottom=nebula.dom.document.scrollTop()+nebula.dom.window.height()*offset;if(!nebula.dom.body.hasClass('page-visibility-hidden')&&((elementTop>=windowTop&&elementTop<windowBottom)||(elementBottom>=windowTop&&elementBottom<windowBottom)||(elementTop<windowTop&&elementBottom>windowBottom))){return!0}}
return!1};nebula.nv=function(action,data,sendNow){if(nebula.isDoNotTrack()){return!1}
if(typeof _hsq==='undefined'){return!1}
if(!sendNow){var sendNow=!0}
if(!action||!data||typeof data=='function'){console.error('Action and Data Object are both required.');ga('send','exception',{'exDescription':'(JS) Action and Data Object are both required in nebula.nv()','exFatal':!1});return!1}
if(action==='identify'){_hsq.push(["identify",data]);jQuery.each(data,function(key,value){nebula.user[key]=value});if(sendNow){_hsq.push(['setPath',window.location.href.replace(nebula.site.directory.root,'')+'#virtual-pageview/identify']);_hsq.push(['trackPageView'])}
if('email' in data){if(!nebula.user.known&&nebula.regex.email.test(data.email)){nebula.dom.document.trigger('nebula_crm_identification',{email:nebula.regex.email.test(data.email),data:data});ga('send','event','CRM','Contact Identified',"A contact's email address in the CRM has been identified.");nebula.user.known=!0}}else{nebula.dom.document.trigger('nebula_crm_details',{data:data});ga('send','event','CRM','Supporting Information','Information associated with this user has been identified.')}}
if(action==='event'){_hsq.push(["trackEvent",data]);_hsq.push(['setPath',window.location.href.replace(nebula.site.directory.root,'')+'#virtual-pageview/'+data]);var oldTitle=document.title;document.title=document.title+' (Virtual)';_hsq.push(['trackPageView']);document.title=oldTitle}
nebula.dom.document.trigger('nv_data',data)};nebula.nvForm=function(formID){var nvFormObj={};if(formID){nvFormObj.form_contacted='CF7 ('+formID+') Submit Attempt'}
jQuery('form [class*="nv-"]').each(function(){if(jQuery(this).val().trim().length){if(jQuery(this).attr('class').indexOf('nv-notable_poi')>=0){ga('set',nebula.analytics.dimensions.poi,jQuery('.notable-poi').val())}
var cat=/nv-([a-z\_]+)/g.exec(jQuery(this).attr('class'));if(cat){var thisCat=cat[1];nvFormObj[thisCat]=jQuery(this).val()}}});if(Object.keys(nvFormObj).length){nebula.nv('identify',nvFormObj)}};nebula.keywordSearch=function(container,parent,values,filteredClass,operator){nebula.keywordFilter(container,parent,values,filteredClass,operator)};nebula.keywordFilter=function(container,parent,values,filteredClass,operator){if(typeof values==='string'){values=[values]}
values=values.filter(String);if(!filteredClass){var filteredClass='filtereditem'}
jQuery(container).find(parent+'.'+filteredClass).removeClass(filteredClass);if(values.length){if(values.length===1&&values[0].length>2&&values[0].charAt(0)==='/'&&values[0].slice(-1)==='/'){var regex=new RegExp(values[0].substring(1).slice(0,-1),'i');jQuery(container).find(parent).each(function(){var elementText=jQuery(this).text().trim().replace(/\s\s+/g,' ');jQuery(this).addClass(filteredClass);if(regex.test(elementText)){jQuery(this).removeClass(filteredClass)}})}else{if(!operator||operator==='and'||operator==='all'){jQuery.each(values,function(index,value){if(value.trim().length){var regex=new RegExp(value,'i');jQuery(container).find(parent).not('.'+filteredClass).each(function(){var elementText=jQuery(this).text().trim().replace(/\s\s+/g,' ');if(!regex.test(elementText)){jQuery(this).addClass(filteredClass)}})}})}else{var pattern='';jQuery.each(values,function(index,value){if(value.trim().length){pattern+=value+'|'}});pattern=pattern.slice(0,-1);var regex=new RegExp(pattern,'i');jQuery(container).find(parent).each(function(){var elementText=jQuery(this).text().trim().replace(/\s\s+/g,' ');jQuery(this).addClass(filteredClass);if(regex.test(elementText)){jQuery(this).removeClass(filteredClass)}})}}}};nebula.menuSearchReplacement=function(){if(jQuery('.nebula-search').length){var randomMenuSearchID=Math.floor((Math.random()*100)+1);jQuery('.menu .nebula-search').html('<form class="wp-menu-nebula-search nebula-search search footer-search" method="get" action="'+nebula.site.home_url+'/"><div class="input-group"><i class="fas fa-search"></i><label class="sr-only" for="nebula-menu-search-'+randomMenuSearchID+'">Search</label><input type="search" id="nebula-menu-search-'+randomMenuSearchID+'" class="nebula-search input search" name="s" placeholder="Search" autocomplete="off" x-webkit-speech /></div></form>');jQuery('.nebula-search input').on('focus',function(){jQuery(this).addClass('focus active')});jQuery('.nebula-search input').on('blur',function(){if(jQuery(this).val()===''||jQuery(this).val().trim().length===0){jQuery(this).removeClass('focus active focusError').attr('placeholder',jQuery(this).attr('placeholder'))}else{jQuery(this).removeClass('active')}})}};nebula.searchTriggerOnlyChars=function(e){var spinnerRegex=new RegExp("^[a-zA-Z0-9]+$");var allowedKeys=[8,46];var searchChar=String.fromCharCode(!e.charCode?e.which:e.charCode);if(spinnerRegex.test(searchChar)||allowedKeys.indexOf(e.which)>-1){return!0}else{return!1}};nebula.autocompleteSearchListeners=function(){if(jQuery('.nebula-search input, input#s, input.search').length){nebula.loadJS(nebula.site.resources.scripts.nebula_jquery_ui,function(){nebula.dom.document.on('blur','.nebula-search input',function(){jQuery('.nebula-search').removeClass('searching').removeClass('autocompleted')});jQuery('input#s, input.search').on('keyup paste change',function(e){if(!jQuery(this).hasClass('no-autocomplete')&&jQuery(this).val().trim().length&&nebula.searchTriggerOnlyChars(e)){nebula.autocompleteSearch(jQuery(this))}})});nebula.loadCSS(nebula.site.resources.styles.nebula_jquery_ui)}};nebula.autocompleteSearch=function(element,types){if(typeof element==='string'){element=jQuery(element)}
if(types&&!Array.isArray(types)){console.error('nebula.autocompleteSearch requires 2nd parameter to be an array.');ga('send','exception',{'exDescription':'(JS) nebula.autocompleteSearch requires 2nd parameter to be an array','exFatal':!1});return!1}
nebula.dom.document.trigger('nebula_autocomplete_search_start',element);nebula.timer('autocompleteSearch','start');nebula.timer('autocompleteResponse','start');if(element.val().trim().length){if(element.val().trim().length>=2){element.closest('form').addClass('searching');setTimeout(function(){element.closest('form').removeClass('searching')},10000);element.closest('.input-group').find('.fa-search').removeClass('fa-search').addClass('fa-spin fa-spinner')}else{element.closest('form').removeClass('searching');element.closest('.input-group').find('.fa-spin').removeClass('fa-spin fa-spinner').addClass('fa-search')}
var postTypes='';if(types){postTypes='&types='+JSON.stringify(types)}
element.autocomplete({position:{my:"left top-2px",at:"left bottom",collision:"flip",},source:function(request,response){jQuery.get({url:nebula.site.home_url+'/wp-json/nebula/v2/autocomplete_search?term='+request.term+postTypes,success:function(data){nebula.dom.document.trigger('nebula_autocomplete_search_success',data);ga('set',nebula.analytics.metrics.autocompleteSearches,1);if(data){nebula.dom.document.trigger('nebula_autocomplete_search_results',data);nebula.prefetch(data[0].link);jQuery.each(data,function(index,value){value.label=value.label.replace(/&#038;/g,"\&")});var noSearchResults=''}else{nebula.dom.document.trigger('nebula_autocomplete_search_no_results');var noSearchResults=' (No Results)'}
nebula.debounce(function(){var thisEvent={category:'Internal Search',action:'Autocomplete Search'+noSearchResults,request:request,term:request.term.toLowerCase(),noResults:(noSearchResults)?!0:!1,};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.term);if(typeof fbq==='function'){fbq('track','Search',{search_string:thisEvent.term})}
nebula.nv('identify',{internal_search:thisEvent.term})},1500,'autocomplete success buffer');ga('send','timing','Autocomplete Search','Server Response',Math.round(nebula.timer('autocompleteSearch','lap')),'Each search until server results');response(data);element.closest('form').removeClass('searching').addClass('autocompleted');element.closest('.input-group').find('.fa-spin').removeClass('fa-spin fa-spinner').addClass('fa-search')},error:function(XMLHttpRequest,textStatus,errorThrown){nebula.dom.document.trigger('nebula_autocomplete_search_error',request.term);nebula.debounce(function(){ga('send','exception',{'exDescription':'(JS) Autocomplete AJAX error: '+textStatus,'exFatal':!1});nebula.nv('event','Autocomplete Search AJAX Error')},1500,'autocomplete error buffer');element.closest('form').removeClass('searching');element.closest('.input-group').find('.fa-spin').removeClass('fa-spin fa-spinner').addClass('fa-search')},timeout:60000})},focus:function(event,ui){event.preventDefault()},select:function(event,ui){var thisEvent={category:'Internal Search',action:'Autocomplete Click',ui:ui,label:ui.item.label,external:(typeof ui.item.external!=='undefined')?!0:!1,};ga('set',nebula.analytics.metrics.autocompleteSearchClicks,1);nebula.dom.document.trigger('nebula_autocomplete_search_selected',thisEvent.ui);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);ga('send','timing','Autocomplete Search','Until Navigation',Math.round(nebula.timer('autocompleteSearch','end')),'From first initial search until navigation');if(thisEvent.external){window.open(ui.item.link,'_blank')}else{window.location.href=ui.item.link}},open:function(){element.closest('form').addClass('autocompleted');var heroAutoCompleteDropdown=jQuery('.form-identifier-nebula-hero-search');heroAutoCompleteDropdown.css('max-width',element.outerWidth())},close:function(){element.closest('form').removeClass('autocompleted')},minLength:3,}).data("ui-autocomplete")._renderItem=function(ul,item){var thisSimilarity=(typeof item.similarity!=='undefined')?item.similarity.toFixed(1)+'% Match':'';var listItem=jQuery("<li class='"+item.classes+"' title='"+thisSimilarity+"'></li>").data("item.autocomplete",item).append("<a> "+item.label.replace(/\\/g,'')+"</a>").appendTo(ul);return listItem};var thisFormIdentifier=element.closest('form').attr('id')||element.closest('form').attr('name')||element.closest('form').attr('class');element.autocomplete("widget").addClass("form-identifier-"+thisFormIdentifier)}};nebula.wpSearchInput=function(){jQuery('#post-0 #s, #nebula-drawer #s, .search-results #s').trigger('focus');var searchVal=nebula.get('s')||jQuery('#s').val();if(searchVal){jQuery('#s, .nebula-search input').attr('placeholder',searchVal.replace(/\+/g,' '))}};nebula.mobileSearchPlaceholder=function(){var mobileHeaderSearchInput=jQuery('#mobileheadersearch input');var searchPlaceholder='What are you looking for?';if(window.matchMedia&&window.matchMedia("(max-width: 410px)").matches){searchPlaceholder='Search'}
mobileHeaderSearchInput.attr('placeholder',searchPlaceholder)};nebula.searchValidator=function(){if(jQuery('.input.search').length){jQuery('.input.search').each(function(){if(jQuery(this).val()===''||jQuery(this).val().trim().length===0){jQuery(this).parent().children('.btn.submit').addClass('disallowed')}else{jQuery(this).parent().children('.btn.submit').removeClass('disallowed').val('Search');jQuery(this).parent().find('.input.search').removeClass('focusError')}});jQuery('.input.search').on('focus blur change keyup paste cut',function(e){var thisPlaceholder=(jQuery(this).attr('data-prev-placeholder')!=='undefined')?jQuery(this).attr('data-prev-placeholder'):'Search';if(jQuery(this).val()===''||jQuery(this).val().trim().length===0){jQuery(this).parent().children('.btn.submit').addClass('disallowed');jQuery(this).parent().find('.btn.submit').val('Go')}else{jQuery(this).parent().children('.btn.submit').removeClass('disallowed');jQuery(this).parent().find('.input.search').removeClass('focusError').prop('title','').attr('placeholder',thisPlaceholder);jQuery(this).parent().find('.btn.submit').prop('title','').removeClass('notallowed').val('Search')}
if(e.type==='paste'){jQuery(this).parent().children('.btn.submit').removeClass('disallowed');jQuery(this).parent().find('.input.search').prop('title','').attr('placeholder','Search').removeClass('focusError');jQuery(this).parent().find('.btn.submit').prop('title','').removeClass('notallowed').val('Search')}});jQuery('form.search').on('submit',function(){if(jQuery(this).find('.input.search').val()===''||jQuery(this).find('.input.search').val().trim().length===0){jQuery(this).parent().find('.input.search').prop('title','Enter a valid search term.').attr('data-prev-placeholder',jQuery(this).attr('placeholder')).attr('placeholder','Enter a valid search term').addClass('focusError').trigger('focus').attr('value','');jQuery(this).parent().find('.btn.submit').prop('title','Enter a valid search term.').addClass('notallowed');return!1}else{return!0}})}};nebula.searchTermHighlighter=function(){window.requestAnimationFrame(function(){var searchTerm=document.URL.split('?s=')[1];if(typeof searchTerm!=='undefined'){var reg=new RegExp("(?![^<]+>)("+preg_quote(searchTerm.replace(/(\+|%22|%20)/g,' '))+")","ig");jQuery('article .entry-title a, article .entry-summary').each(function(i){jQuery(this).html(function(i,html){return html.replace(reg,'<mark class="searchresultword">$1</mark>')})});nebula.emphasizeSearchTerms()}})};nebula.emphasizeSearchTerms=function(){window.requestAnimationFrame(function(){var origBGColor=jQuery('.searchresultword').css('background-color');jQuery('.searchresultword').each(function(i){var stallFor=150*parseInt(i);jQuery(this).delay(stallFor).animate({backgroundColor:'rgba(255, 255, 0, 0.5)',borderColor:'rgba(255, 255, 0, 1)',},500,'swing',function(){jQuery(this).delay(1000).animate({backgroundColor:origBGColor,},1000,'swing',function(){jQuery(this).addClass('transitionable')})})})})};nebula.singleResultDrawer=function(){var searchTerm=nebula.get('rs');if(searchTerm){searchTerm=searchTerm.replace(/\%20|\+/g,' ').replace(/\%22|"|'/g,'');jQuery('#searchform input#s').val(searchTerm);nebula.dom.document.on('click','#nebula-drawer .close',function(){var permalink=jQuery(this).attr('href');history.replaceState(null,document.title,permalink);jQuery('#nebula-drawer').slideUp();return!1})}};nebula.pageSuggestion=function(){if(nebula.dom.body.hasClass('search-no-results')||nebula.dom.body.hasClass('error404')){if(nebula.has(nebula,'site.options')&&nebula.site.options.nebula_cse_id!==''&&nebula.site.options.nebula_google_browser_api_key!==''){if(nebula.get().length){var queryStrings=nebula.get()}else{var queryStrings=['']}
var path=window.location.pathname;var phrase=decodeURIComponent(path.replace(/\/+/g,' ')).trim()+' '+decodeURIComponent(queryStrings[0].replace(/\+/g,' ')).trim();nebula.tryGCSESearch(phrase)}
nebula.dom.document.on('mousedown','a.gcse-suggestion, a.internal-suggestion',function(e){var thisEvent={event:e,category:'Page Suggestion',action:(jQuery(this).hasClass('internal-suggestion'))?'Internal':'GCSE',intent:(e.which>=2)?'Intent':'Explicit',suggestion:jQuery(this).text(),};ga('set',nebula.analytics.dimensions.eventIntent,thisEvent.intent);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.suggestion);nebula.nv('event','Page Suggestion Click')})}};nebula.tryGCSESearch=function(phrase){if(nebula.site.options.nebula_cse_id.length&&nebula.site.options.nebula_google_browser_api_key.length){var queryParams={cx:nebula.site.options.nebula_cse_id,key:nebula.site.options.nebula_google_browser_api_key,num:10,q:phrase,alt:'JSON'};var API_URL='https://www.googleapis.com/customsearch/v1?';jQuery.getJSON(API_URL,queryParams,function(response){if(response.items&&response.items.length){if(response.items[0].link!==window.location.href){nebula.showSuggestedGCSEPage(response.items[0].title,response.items[0].link)}}})}};nebula.showSuggestedGCSEPage=function(title,url){var hostname=new RegExp(location.host);if(hostname.test(url)){jQuery('.gcse-suggestion').attr('href',url).text(title);jQuery('#nebula-drawer.suggestedpage').slideDown();nebula.prefetch(url)}};nebula.cf7Functions=function(){if(!jQuery('.wpcf7-form').length){return!1}
jQuery('.wpcf7-form p:empty').remove();var formStarted={};jQuery('.wpcf7-form input[type=submit]').each(function(){if(!jQuery(this).hasClass('no-button')){jQuery(this).replaceWith('<button id="submit" type="submit" class="'+jQuery(this).attr('class')+'">'+jQuery(this).val()+'</button>')}});jQuery('.wpcf7-form').each(function(){var thisEvent={category:'CF7 Form',action:'Impression',formID:jQuery(this).closest('.wpcf7').attr('id')||jQuery(this).attr('id'),};nebula.dom.document.trigger('nebula_event',thisEvent);ga('impressionTracker:observeElements',[{'id':thisEvent.formID,'threshold':0.25,'fieldsObj':{'eventCategory':thisEvent.category,},}])});nebula.dom.document.on('shown.bs.modal',function(e){if(typeof wpcf7.initForm==='function'&&jQuery(e.target).find('.wpcf7-form').length&&!jQuery(e.target).find('.ajax-loader').length){wpcf7.initForm(jQuery(e.target).find('.wpcf7-form'))}});nebula.dom.document.on('focus','.wpcf7-form input, .wpcf7-form button, .wpcf7-form textarea',function(e){var formID=jQuery(this).closest('div.wpcf7').attr('id');var thisField=e.target.name||jQuery(this).closest('.form-group').find('label').text()||e.target.id||'Unknown';var fieldInfo='';if(jQuery(this).attr('type')==='checkbox'||jQuery(this).attr('type')==='radio'){fieldInfo=jQuery(this).attr('value')}
if(!jQuery(this).hasClass('.ignore-form')&&!jQuery(this).find('.ignore-form').length&&!jQuery(this).parents('.ignore-form').length){var thisEvent={event:e,category:'CF7 Form',action:'Started Form (Focus)',formID:formID,field:thisField,fieldInfo:fieldInfo};if(typeof formStarted[formID]==='undefined'||!formStarted[formID]){thisEvent.label='Began filling out form ID: '+thisEvent.formID+' ('+thisEvent.field+')';ga('set',nebula.analytics.metrics.formStarts,1);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);nebula.nv('identify',{'form_contacted':'CF7 ('+thisEvent.formID+') Started'},!1);nebula.nv('event','Contact Form ('+thisEvent.formID+') Started ('+thisEvent.field+')');formStarted[formID]=!0}
nebula.updateFormFlow(thisEvent.formID,thisEvent.field,thisEvent.fieldInfo);if(!jQuery(this).is('button')){thisEvent.action='Individual Field Focused';thisEvent.label='Focus into '+thisEvent.field+' (Form ID: '+thisEvent.formID+')';nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-form-started','nebula-event':thisEvent})}}
nebula.timer(formID,'start',thisField);if(nebula&&nebula.timings&&typeof nebula.timings[formID]!=='undefined'&&typeof nebula.timings[formID].lap[nebula.timings[formID].laps-1]!=='undefined'){var labelText='';if(jQuery(this).parent('.label')){labelText=jQuery(this).parent('.label').text()}else if(jQuery('label[for="'+jQuery(this).attr('id')+'"]').length){labelText=jQuery('label[for="'+jQuery(this).attr('id')+'"]').text()}else if(jQuery(this).attr('placeholder').length){labelText=' "'+jQuery(this).attr('placeholder')+'"'}
ga('send','timing','CF7 Form',nebula.timings[formID].lap[nebula.timings[formID].laps-1].name+labelText+' (Form ID: '+formID+')',Math.round(nebula.timings[formID].lap[nebula.timings[formID].laps-1].duration),'Amount of time on this input field (until next focus or submit).')}});nebula.dom.document.on('wpcf7beforesubmit',function(e){jQuery(e.target).find('button#submit').addClass('active')});nebula.dom.document.on('wpcf7invalid',function(e){var thisEvent={event:e,category:'CF7 Form',action:'Submit (Invalid)',formID:e.detail.id,};if(nebula&&nebula.timings&&typeof nebula.timings[e.detail.id]!=='undefined'){thisEvent.formTime=nebula.timer(e.detail.id,'lap','wpcf7-submit-invalid');thisEvent.inputs=nebula.timings[e.detail.id].laps+' inputs'}
thisEvent.label='Form validation errors occurred on form ID: '+thisEvent.formID;jQuery('.wpcf7-not-valid').each(function(){jQuery(this).addClass('is-invalid')});nebula.updateFormFlow(thisEvent.formID,'[Invalid]');ga('set',nebula.analytics.dimensions.contactMethod,'CF7 Form (Invalid)');ga('set',nebula.analytics.dimensions.formTiming,nebula.millisecondsToString(thisEvent.formTime)+'ms ('+thisEvent.inputs+')');nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-form-invalid','nebula-event':thisEvent});ga('send','exception',{'exDescription':'(JS) Invalid form submission for form ID '+thisEvent.formID,'exFatal':!1});nebula.scrollTo(jQuery(".wpcf7-not-valid").first());nebula.nv('identify',{'form_contacted':'CF7 ('+thisEvent.formID+') Invalid'},!1);nebula.nv('event','Contact Form ('+thisEvent.formID+') Invalid')});jQuery('.wpcf7-form input').on('invalid',function(e){nebula.debounce(function(){var thisEvent={event:e,category:'CF7 Form',action:'Submit (Invalid)',label:'General HTML5 validation error',};nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-form-invalid','nebula-event':thisEvent});nebula.nv('identify',{'form_contacted':'CF7 HTML5 Validation Error'})},50,'invalid form')});nebula.dom.document.on('wpcf7spam',function(e){var thisEvent={event:e,category:'CF7 Form',action:'Submit (Spam)',formID:e.detail.id,formTime:nebula.timer(e.detail.id,'end'),inputs:nebula.timings[e.detail.id].laps+' inputs'};thisEvent.label='Form submission failed spam tests on form ID: '+thisEvent.formID;nebula.updateFormFlow(thisEvent.formID,'[Spam]');ga('set',nebula.analytics.dimensions.contactMethod,'CF7 Form (Spam)');ga('set',nebula.analytics.dimensions.formTiming,nebula.millisecondsToString(thisEvent.formTime)+'ms ('+thisEvent.inputs+')');nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-form-spam','nebula-event':thisEvent});ga('send','exception',{'exDescription':'(JS) Spam form submission for form ID '+thisEvent.formID,'exFatal':!1});nebula.nv('identify',{'form_contacted':'CF7 ('+thisEvent.formID+') Submit Spam'},!1);nebula.nv('event','Contact Form ('+thisEvent.formID+') Spam')});nebula.dom.document.on('wpcf7mailfailed',function(e){var thisEvent={event:e,category:'CF7 Form',action:'Submit (Mail Failed)',formID:e.detail.id,formTime:nebula.timer(e.detail.id,'end'),inputs:nebula.timings[e.detail.id].laps+' inputs'};thisEvent.label='Form submission email send failed for form ID: '+thisEvent.formID;nebula.updateFormFlow(thisEvent.formID,'[Failed]');ga('set',nebula.analytics.dimensions.contactMethod,'CF7 Form (Failed)');ga('set',nebula.analytics.dimensions.formTiming,nebula.millisecondsToString(thisEvent.formTime)+'ms ('+thisEvent.inputs+')');nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-form-failed','nebula-event':thisEvent});ga('send','exception',{'exDescription':'(JS) Mail failed to send for form ID '+thisEvent.formID,'exFatal':!0});nebula.nv('identify',{'form_contacted':'CF7 ('+thisEvent.formID+') Submit Failed'},!1);nebula.nv('event','Contact Form ('+thisEvent.formID+') Failed')});nebula.dom.document.on('wpcf7mailsent',function(e){formStarted[e.detail.id]=!1;var thisEvent={event:e,category:'CF7 Form',action:'Submit (Success)',formID:e.detail.id,formTime:nebula.timer(e.detail.id,'end'),inputs:nebula.timings[e.detail.id].laps+' inputs'};thisEvent.label='Form ID: '+thisEvent.formID;nebula.updateFormFlow(thisEvent.formID,'[Success]');if(!jQuery('#'+e.detail.id).hasClass('.ignore-form')&&!jQuery('#'+e.detail.id).find('.ignore-form').length&&!jQuery('#'+e.detail.id).parents('.ignore-form').length){ga('set',nebula.analytics.metrics.formSubmissions,1)}
ga('set',nebula.analytics.dimensions.contactMethod,'CF7 Form (Success)');ga('set',nebula.analytics.dimensions.formTiming,nebula.millisecondsToString(thisEvent.formTime)+'ms ('+thisEvent.inputs+')');ga('send','timing',thisEvent.category,'Form Completion (ID: '+thisEvent.formID+')',Math.round(thisEvent.formTime),'Initial form focus until valid submit');nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-form-submit-success','nebula-event':thisEvent});if(typeof fbq==='function'){fbq('track','Lead',{content_name:'Form Submit (Success)'})}
nebula.nv('identify',{'form_contacted':'CF7 ('+thisEvent.formID+') Submit Success'},!1);nebula.nv('event','Contact Form ('+thisEvent.formID+') Submit Success');jQuery('#'+e.detail.id+' .wpcf7-textarea, #'+e.detail.id+' .wpcf7-text').each(function(){jQuery(this).trigger('keyup');localStorage.removeItem('cf7_'+jQuery(this).attr('name'))});jQuery('#'+e.detail.id).find('.is-valid, .is-invalid').removeClass('is-valid is-invalid')});nebula.dom.document.on('wpcf7submit',function(e){var thisEvent={event:e,category:'CF7 Form',action:'Submit (Attempt)',formID:e.detail.id,};if(nebula&&nebula.timings&&typeof nebula.timings[e.detail.id]!=='undefined'){thisEvent.formTime=nebula.timer(e.detail.id,'lap','wpcf7-submit-attempt');thisEvent.inputs=nebula.timings[e.detail.id].laps+' inputs'}
thisEvent.label='Submission attempt for form ID: '+thisEvent.formID;nebula.nvForm(thisEvent.formID);ga('set',nebula.analytics.dimensions.contactMethod,'CF7 Form (Attempt)');ga('set',nebula.analytics.dimensions.formTiming,nebula.millisecondsToString(thisEvent.formTime)+'ms ('+thisEvent.inputs+')');nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.label);window.dataLayer.push({'event':'nebula-form-submit-attempt','nebula-event':thisEvent});if(typeof fbq==='function'){fbq('track','Lead',{content_name:'Form Submit (Attempt)'})}
jQuery('#'+e.detail.id).find('button#submit').removeClass('active');jQuery('.invalid-feedback').addClass('hidden')})};nebula.updateFormFlow=function(formID,field,info){if(typeof formFlow==='undefined'){var formFlow={}}
if(!info){info=''}else{if(info.length>25){info=info.substring(0,25)+'...'}
info=' ('+info+')'}
if(!formFlow[formID]){formFlow[formID]=formID+': '+field+info}else{formFlow[formID]+=' > '+field+info}
ga('set',nebula.analytics.dimensions.formFlow,formFlow[formID])};nebula.cf7LocalStorage=function(){if(!jQuery('.wpcf7-form').length||jQuery('.ie, .internet_explorer').length){return!1}
jQuery('.wpcf7-textarea, .wpcf7-text').each(function(){var thisLocalStorageVal=localStorage.getItem('cf7_'+jQuery(this).attr('name'));if(!jQuery(this).hasClass('do-not-store')&&!jQuery(this).hasClass('.wpcf7-captchar')&&thisLocalStorageVal&&thisLocalStorageVal!=='undefined'&&thisLocalStorageVal!==''){if(jQuery(this).val()===''){jQuery(this).val(thisLocalStorageVal).trigger('keyup')}
jQuery(this).blur()}else{localStorage.removeItem('cf7_'+jQuery(this).attr('name'))}
jQuery(this).on('keyup blur',function(){if(!jQuery(this).hasClass('do-not-store')&&!jQuery(this).hasClass('.wpcf7-captchar')){localStorage.setItem('cf7_'+jQuery(this).attr('name'),jQuery(this).val())}})});nebula.dom.window.on('storage',function(e){jQuery('.wpcf7-textarea, .wpcf7-text').each(function(){if(!jQuery(this).hasClass('do-not-store')&&!jQuery(this).hasClass('.wpcf7-captchar')){jQuery(this).val(localStorage.getItem('cf7_'+jQuery(this).attr('name'))).trigger('keyup')}})});if(window.location.hash.indexOf('wpcf7')>0){if(jQuery(window.location.hash+' .wpcf7-mail-sent-ok').length){jQuery(window.location.hash+' .wpcf7-textarea, '+window.location.hash+' .wpcf7-text').each(function(){localStorage.removeItem('cf7_'+jQuery(this).attr('name'));jQuery(this).val('').trigger('keyup')})}}};nebula.liveValidator=function(){nebula.dom.document.on('keyup change blur','.nebula-validate-text, .nebula-validate-textarea, .nebula-validate-select',function(e){if(jQuery(this).val()===''){nebula.applyValidationClasses(jQuery(this),'reset',!1)}else if(jQuery(this).val().trim().length){nebula.applyValidationClasses(jQuery(this),'valid',!1)}else{nebula.applyValidationClasses(jQuery(this),'invalid',(e.type!=='keyup'))}});nebula.dom.document.on('keyup change blur','.nebula-validate-regex',function(e){var pattern=new RegExp(jQuery(this).attr('pattern'),'i');if(jQuery(this).val()===''){nebula.applyValidationClasses(jQuery(this),'reset',!1)}else if(pattern.test(jQuery(this).val())){nebula.applyValidationClasses(jQuery(this),'valid',!1)}else{nebula.applyValidationClasses(jQuery(this),'invalid',(e.type!=='keyup'))}});nebula.dom.document.on('keyup change blur','.nebula-validate-url',function(e){if(jQuery(this).val()===''){nebula.applyValidationClasses(jQuery(this),'reset',!1)}else if(nebula.regex.url.test(jQuery(this).val())){nebula.applyValidationClasses(jQuery(this),'valid',!1)}else{nebula.applyValidationClasses(jQuery(this),'invalid',(e.type!=='keyup'))}});nebula.dom.document.on('keyup change blur','.nebula-validate-email',function(e){if(jQuery(this).val()===''){nebula.applyValidationClasses(jQuery(this),'reset',!1)}else if(nebula.regex.email.test(jQuery(this).val())){nebula.applyValidationClasses(jQuery(this),'valid',!1)}else{nebula.applyValidationClasses(jQuery(this),'invalid',(e.type!=='keyup'))}});nebula.dom.document.on('keyup change blur','.nebula-validate-phone',function(e){if(jQuery(this).val()===''){nebula.applyValidationClasses(jQuery(this),'reset',!1)}else if(nebula.regex.phone.test(jQuery(this).val())){nebula.applyValidationClasses(jQuery(this),'valid',!1)}else{nebula.applyValidationClasses(jQuery(this),'invalid',(e.type!=='keyup'))}});if(jQuery('.nebula-validate-date').length){nebula.loadJS(nebula.site.resources.scripts.nebula_moment)}
nebula.dom.document.on('keyup change blur','.nebula-validate-date',function(e){if(jQuery(this).val()===''){nebula.applyValidationClasses(jQuery(this),'reset',!1)}else if(moment(jQuery(this).val()).isValid()&&moment(jQuery(this).val()).year()>1800&&moment(jQuery(this).val()).year()<2999){nebula.applyValidationClasses(jQuery(this),'valid',!1)}else{nebula.applyValidationClasses(jQuery(this),'invalid',(e.type!=='keyup'))}});nebula.dom.document.on('change blur','.nebula-validate-checkbox, .nebula-validate-radio',function(e){if(jQuery(this).closest('.form-group').find('input:checked').length){nebula.applyValidationClasses(jQuery(this),'reset',!1)}else{nebula.applyValidationClasses(jQuery(this),'invalid',!0)}});nebula.dom.document.on('mouseover focus','form [type="submit"], form #submit',function(){var invalidCount=0;jQuery(this).closest('form').find('[required], .wpcf7-validates-as-required').each(function(){if(jQuery(this).find('input:checked').length){return}
if(jQuery(this).val().trim().length==0){jQuery(this).addClass('nebula-empty-required');invalidCount++}});if(invalidCount>0){var invalidCountText=(invalidCount===1)?' invalid field remains':' invalid fields remain';jQuery('form [type="submit"], form #submit').attr('title',invalidCount+invalidCountText)}});nebula.dom.document.on('mouseout blur','form [type="submit"], form #submit',function(){jQuery(this).closest('form').find('.nebula-empty-required').removeClass('nebula-empty-required');jQuery('form [type="submit"], form #submit').removeAttr('title')})};nebula.applyValidationClasses=function(element,validation,showFeedback){if(typeof element==='string'){element=jQuery(element)}else if(typeof element!=='object'){return!1}
if(validation==='success'||validation==='valid'){element.removeClass('wpcf7-not-valid is-invalid').addClass('is-valid').parent().find('.wpcf7-not-valid-tip').remove()}else if(validation==='danger'||validation==='error'||validation==='invalid'){element.removeClass('wpcf7-not-valid is-valid').addClass('is-invalid')}else if(validation==='reset'||validation==='remove'){element.removeClass('wpcf7-not-valid is-invalid is-valid').parent().find('.wpcf7-not-valid-tip').remove()}
var feedbackElement=!1;if(element.parent().find('.invalid-feedback').length){feedbackElement=element.parent().find('.invalid-feedback')}else if(element.closest('.form-group').find('.invalid-feedback').length){feedbackElement=element.closest('.form-group').find('.invalid-feedback')}
if(feedbackElement){if(validation==='feedback'||showFeedback){feedbackElement.removeClass('hidden').show()}else{feedbackElement.addClass('hidden').hide()}}};nebula.lazyLoadAssets=function(){if('IntersectionObserver' in window){var lazyObserver=new IntersectionObserver(function(entries){entries.forEach(function(entry){if(entry.intersectionRatio>0){nebula.loadElement(jQuery(entry.target));lazyObserver.unobserve(entry.target)}})},{rootMargin:'100%',threshold:0.1});jQuery('.nebula-lazy-position, .lazy-load').each(function(){lazyObserver.observe(jQuery(this)[0])});var lazyLoadScrollBottom=function(){if(nebula.dom.window.scrollTop()+nebula.dom.window.height()>nebula.dom.document.height()-500){nebula.loadEverything();window.removeEventListener('scroll',lazyLoadScrollBottom)}};window.addEventListener('scroll',lazyLoadScrollBottom)}else{nebula.loadEverything()}
nebula.dom.window.on('nebula_load',function(){nebula.loadEverything()});jQuery.each(nebula.site.resources.lazy.styles,function(handle,condition){if(condition==='all'||jQuery(condition).length){if(nebula.site.resources.styles[handle.replace(/-/g,'_')]){nebula.loadCSS(nebula.site.resources.styles[handle.replace(/-/g,'_')])}}});jQuery.each(nebula.site.resources.lazy.scripts,function(handle,condition){if(condition==='all'||jQuery(condition).length){if(nebula.site.resources.scripts[handle.replace(/-/g,'_')]){nebula.loadJS(nebula.site.resources.scripts[handle.replace(/-/g,'_')])}}});if(jQuery('.mobilenavtrigger').length){nebula.loadJS(nebula.site.resources.scripts.nebula_mmenu,function(){nebula.mmenus()});nebula.loadCSS(nebula.site.resources.styles.nebula_mmenu)}
if(jQuery('.googlemap').length){if(typeof google=="undefined"||!nebula.has(google,'maps')){nebula.loadJS('https://www.google.com/jsapi?key='+nebula.site.options.nebula_google_browser_api_key,function(){google.load('maps','3',{other_params:'libraries=places&key='+nebula.site.options.nebula_google_browser_api_key,callback:function(){nebula.dom.document.trigger('nebula_google_maps_api_loaded')}})})}else{nebula.dom.document.trigger('nebula_google_maps_api_loaded')}}
if(jQuery('pre.nebula-code, pre.nebula-code').length){nebula.loadCSS(nebula.site.resources.styles.nebula_pre);nebula.pre()}};nebula.loadEverything=function(){jQuery('.nebula-lazy-position, .lazy-load, .nebula-lazy').each(function(){nebula.loadElement(jQuery(this))})};nebula.loadElement=function(element){if(element.is('samp')){var lazyElement=element.next('noscript.nebula-lazy');element.remove();var thisContent=jQuery(lazyElement.text()).on('load loadeddata',function(){nebula.lazyVideoTracking(lazyElement)});lazyElement.replaceWith(thisContent);nebula.svgImgs()}
if(element.hasClass('lazy-load')){element.removeClass('lazy-load').addClass('lazy-loaded')}};nebula.loadJS=function(url,callback){if(typeof url==='string'){var lazyScriptElement=document.createElement('script');lazyScriptElement.src=url;if(callback){lazyScriptElement.onload=callback}
lazyScriptElement.onerror=function(){ga('send','exception',{'exDescription':'(JS) '+url+' could not be loaded','exFatal':!1});nebula.nv('event','JavaScript resource could not be dynamically loaded')};document.body.appendChild(lazyScriptElement)}else{console.error('nebula.loadJS() requires a valid URL.')}};nebula.loadCSS=function(url){if(typeof url==='string'){jQuery('head').append('<link rel="stylesheet" href="'+url+'" type="text/css" media="screen">')}else{console.error('nebula.loadCSS() requires a valid URL. The requested URL is invalid:',url)}};nebula.addressAutocomplete=function(autocompleteInput,uniqueID){if(jQuery(autocompleteInput).length&&jQuery(autocompleteInput).is('input')){if(!uniqueID){uniqueID='unnamed'}
if(typeof google!=="undefined"&&nebula.has(google,'maps')){nebula.googleAddressAutocompleteCallback(autocompleteInput,uniqueID)}else{if(typeof autocompleteInputs==='undefined'){var autocompleteInputs={}}
autocompleteInputs[uniqueID]=autocompleteInput;nebula.debounce(function(){nebula.loadJS('https://www.google.com/jsapi?key='+nebula.site.options.nebula_google_browser_api_key,function(){google.load('maps','3',{other_params:'libraries=places&key='+nebula.site.options.nebula_google_browser_api_key,callback:function(){jQuery.each(autocompleteInputs,function(uniqueID,input){nebula.googleAddressAutocompleteCallback(input,uniqueID)})}})})},100,'google maps script load')}}};nebula.googleAddressAutocompleteCallback=function(autocompleteInput,uniqueID){if(typeof uniqueID==='undefined'||uniqueID==='undefined'){uniqueID='unnamed'}
window[uniqueID]=new google.maps.places.Autocomplete(jQuery(autocompleteInput)[0],{types:['geocode']});google.maps.event.addListener(window[uniqueID],'place_changed',function(){var place=window[uniqueID].getPlace();var simplePlace=nebula.sanitizeGooglePlaceData(place,uniqueID);var thisEvent={category:'Contact',action:'Autocomplete Address',intent:'Intent',place:place,simplePlace:simplePlace};nebula.dom.document.trigger('nebula_address_selected',[place,simplePlace,jQuery(autocompleteInput)]);nebula.dom.document.trigger('nebula_event',thisEvent);ga('set',nebula.analytics.dimensions.contactMethod,thisEvent.action);ga('send','event','Contact','Autocomplete Address',simplePlace.city+', '+simplePlace.state.abbr+' '+simplePlace.zip.code);nebula.nv('identify',{'street_number':simplePlace.street.number,'street_name':simplePlace.street.name,'street_full':simplePlace.street.full,'city':simplePlace.city,'county':simplePlace.county,'state':simplePlace.state.name,'country':simplePlace.country.name,'zip':simplePlace.zip.code,'address':simplePlace.street.full+', '+simplePlace.city+', '+simplePlace.state.abbr+' '+simplePlace.zip.code})});jQuery(autocompleteInput).on('focus',function(){if(nebula.site.protocol==='https'&&navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){var geolocation=new google.maps.LatLng(position.coords.latitude,position.coords.longitude);var circle=new google.maps.Circle({center:geolocation,radius:position.coords.accuracy});window[uniqueID].setBounds(circle.getBounds())})}}).on('keydown',function(e){if(e.which===13&&jQuery('.pac-container:visible').length){return!1}});if(autocompleteInput==='#address-autocomplete'){nebula.dom.document.on('nebula_address_selected',function(){})}};nebula.sanitizeGooglePlaceData=function(place,uniqueID){if(!place){console.error('Place data is required for sanitization.');return!1}
if(!uniqueID){uniqueID='unnamed'}
if(typeof nebula.user.address==='undefined'){nebula.user.address={}}
if(!Array.isArray(nebula.user.address)){nebula.user.address=[]}
nebula.user.address[uniqueID]={street:{number:null,name:null},city:null,county:null,state:{name:null,abbr:null},country:{name:null,abbr:null},zip:{code:null,suffix:null}};for(var i=0;i<place.address_components.length;i++){switch(place.address_components[i].types[0]){case "street_number":nebula.user.address[uniqueID].street.number=place.address_components[i].short_name;break;case "route":nebula.user.address[uniqueID].street.name=place.address_components[i].long_name;break;case "locality":nebula.user.address[uniqueID].city=place.address_components[i].long_name;break;case "administrative_area_level_2":nebula.user.address[uniqueID].county=place.address_components[i].long_name;break;case "administrative_area_level_1":nebula.user.address[uniqueID].state.name=place.address_components[i].long_name;nebula.user.address[uniqueID].state.abbr=place.address_components[i].short_name;break;case "country":nebula.user.address[uniqueID].country.name=place.address_components[i].long_name;nebula.user.address[uniqueID].country.abbr=place.address_components[i].short_name;break;case "postal_code":nebula.user.address[uniqueID].zip.code=place.address_components[i].short_name;break;case "postal_code_suffix":nebula.user.address[uniqueID].zip.suffix=place.address_components[i].short_name;break;default:}}
if(nebula.user.address[uniqueID].street.number&&nebula.user.address[uniqueID].street.name){nebula.user.address[uniqueID].street.full=nebula.user.address[uniqueID].street.number+' '+nebula.user.address[uniqueID].street.name}
if(nebula.user.address[uniqueID].zip.code&&nebula.user.address[uniqueID].zip.suffix){nebula.user.address[uniqueID].zip.full=nebula.user.address[uniqueID].zip.code+'-'+nebula.user.address[uniqueID].zip.suffix}
return nebula.user.address[uniqueID]};function requestPosition(){if(typeof google!=='undefined'&&nebula.has(google,'maps')){nebula.loadJS('https://www.google.com/jsapi?key='+nebula.site.options.nebula_google_browser_api_key,function(){google.load('maps','3',{other_params:'libraries=placeskey='+nebula.site.options.nebula_google_browser_api_key,callback:function(){nebula.getCurrentPosition()}})})}else{getCurrentPosition()}}
nebula.getCurrentPosition=function(){var nav=null;if(nav===null){nav=window.navigator}
var geolocation=nav.geolocation;if(geolocation!=null){geolocation.getCurrentPosition(geoSuccessCallback,geoErrorCallback,{enableHighAccuracy:!0})}};function geoSuccessCallback(position){nebula.session.geolocation={error:!1,coordinates:{latitude:position.coords.latitude,longitude:position.coords.longitude},accuracy:{meters:position.coords.accuracy,miles:(position.coords.accuracy*0.000621371).toFixed(2),},altitude:{meters:position.coords.altitude,miles:(position.coords.altitude*0.000621371).toFixed(2),accuracy:position.coords.altitudeAccuracy,},speed:{mps:position.coords.speed,kph:(position.coords.speed*3.6).toFixed(2),mph:(position.coords.speed*2.23694).toFixed(2),},heading:position.coords.heading,address:!1};if(nebula.session.geolocation.accuracy.meters<50){nebula.session.geolocation.accuracy.color='#00bb00';ga('set',nebula.analytics.dimensions.geoAccuracy,'Excellent (<50m)')}else if(nebula.session.geolocation.accuracy.meters>50&&nebula.session.geolocation.accuracy.meters<300){nebula.session.geolocation.accuracy.color='#a4ed00';ga('set',nebula.analytics.dimensions.geoAccuracy,'Good (50m - 300m)')}else if(nebula.session.geolocation.accuracy.meters>300&&nebula.session.geolocation.accuracy.meters<1500){nebula.session.geolocation.accuracy.color='#ffc600';ga('set',nebula.analytics.dimensions.geoAccuracy,'Poor (300m - 1500m)')}else{nebula.session.geolocation.accuracy.color='#ff1900';ga('set',nebula.analytics.dimensions.geoAccuracy,'Very Poor (>1500m)')}
nebula.addressLookup(position.coords.latitude,position.coords.longitude);sessionStorage.nebulaSession=JSON.stringify(nebula.session);nebula.dom.document.trigger('geolocationSuccess',nebula.session.geolocation);nebula.dom.body.addClass('geo-latlng-'+nebula.session.geolocation.coordinates.latitude.toFixed(4).replace('.','_')+'_'+nebula.session.geolocation.coordinates.longitude.toFixed(4).replace('.','_')+' geo-acc-'+nebula.session.geolocation.accuracy.meters.toFixed(0).replace('.',''));ga('set',nebula.analytics.dimensions.geolocation,nebula.session.geolocation.coordinates.latitude.toFixed(4)+', '+nebula.session.geolocation.coordinates.longitude.toFixed(4));ga('send','event','Geolocation',nebula.session.geolocation.coordinates.latitude.toFixed(4)+', '+nebula.session.geolocation.coordinates.longitude.toFixed(4),'Accuracy: '+nebula.session.geolocation.accuracy.meters.toFixed(2)+' meters');nebula.nv('identify',{'geolocation':nebula.session.geolocation.coordinates.latitude.toFixed(4)+', '+nebula.session.geolocation.coordinates.longitude.toFixed(4)+' (Accuracy: '+nebula.session.geolocation.accuracy.meters.toFixed(2)+' meters'})}
function geoErrorCallback(error){switch(error.code){case error.PERMISSION_DENIED:var geolocationErrorMessage='Access to your location is turned off. Change your settings to report location data.';var geoErrorNote='Denied';break;case error.POSITION_UNAVAILABLE:var geolocationErrorMessage="Data from location services is currently unavailable.";var geoErrorNote='Unavailable';break;case error.TIMEOUT:var geolocationErrorMessage="Location could not be determined within a specified timeout period.";var geoErrorNote='Timeout';break;default:var geolocationErrorMessage="An unknown error has occurred.";var geoErrorNote='Error';break}
nebula.session.geolocation={error:{code:error.code,description:geolocationErrorMessage}};nebula.dom.document.trigger('geolocationError');nebula.dom.body.addClass('geo-error');ga('set',nebula.analytics.dimensions.geolocation,geolocationErrorMessage);ga('send','exception',{'exDescription':'(JS) Geolocation error: '+geolocationErrorMessage,'exFatal':!1});nebula.nv('event','Geolocation Error')}
nebula.addressLookup=function(lat,lng){var geocoder=new google.maps.Geocoder();var latlng=new google.maps.LatLng(lat,lng);geocoder.geocode({'latLng':latlng},function(results,status){if(status===google.maps.GeocoderStatus.OK){if(results){nebula.session.geolocation.address={number:nebula.extractFromAddress(results[0].address_components,"street_number"),street:nebula.extractFromAddress(results[0].address_components,"route"),city:nebula.extractFromAddress(results[0].address_components,"locality"),town:nebula.extractFromAddress(results[0].address_components,"administrative_area_level_3"),county:nebula.extractFromAddress(results[0].address_components,"administrative_area_level_2"),state:nebula.extractFromAddress(results[0].address_components,"administrative_area_level_1"),country:nebula.extractFromAddress(results[0].address_components,"country"),zip:nebula.extractFromAddress(results[0].address_components,"postal_code"),formatted:results[0].formatted_address,place:{id:results[0].place_id,},};nebula.nv('identify',{'address_lookup':results[0].formatted_address});sessionStorage.nebulaSession=JSON.stringify(nebula.session);nebula.dom.document.trigger('addressSuccess');if(nebula.session.geolocation.accuracy.meters<100){nebula.placeLookup(results[0].place_id)}}}})};nebula.extractFromAddress=function(components,type){for(var i=0;i<components.length;i++){for(var j=0;j<components[i].types.length;j++){if(components[i].types[j]===type){return components[i].long_name}}}
return''};nebula.placeLookup=function(placeID){if(nebula.has(google,'maps.places')){var service=new google.maps.places.PlacesService(jQuery('<div></div>').get(0));service.getDetails({placeId:placeID},function(place,status){if(status===google.maps.places.PlacesServiceStatus.OK){if(typeof place.name!=='undefined'){nebula.session.geolocation.address.place={id:placeID,name:place.name,url:place.url,website:place.website,phone:place.formatted_phone_number,ratings:{rating:place.rating,total:place.user_ratings_total,reviews:(typeof place.reviews!=='undefined')?place.reviews.length:0,},utc_offset:place.utc_offset,};sessionStorage.nebulaSession=JSON.stringify(nebula.session);nebula.dom.document.trigger('placeSuccess')}}})}};nebula.helpers=function(){if(nebula.get('sass')&&!nebula.get('persistent')&&window.history.replaceState){window.history.replaceState({},document.title,nebula.removeQueryParameter('sass',window.location.href))}
nebula.dom.html.removeClass('no-js').addClass('js');jQuery("a[href^='http']:not([href*='"+nebula.site.domain+"'])").attr('rel','nofollow external noopener');if('deviceMemory' in navigator){var deviceMemoryLevel=navigator.deviceMemory<1?'lite':'full';nebula.dom.html.addClass('device-memory-'+deviceMemoryLevel)}
jQuery('a img').closest('a').addClass('no-icon');jQuery('.no-icon:not(a)').find('a').addClass('no-icon');jQuery('span.nebula-code').parent('p').css('margin-bottom','0px');if(document.location.hash){nebula.focusOnElement(jQuery(document.location.hash))}
nebula.dom.window.on('hashchange',function(){var hash=window.location.hash.replace(/^#/,'');if(hash){nebula.focusOnElement(jQuery('#'+hash))}});nebula.dragDropUpload()};nebula.dragDropUpload=function(){if(jQuery('.nebula-drop-area').length){document.querySelectorAll('.nebula-drop-area').forEach(function(dropArea){var thisEvent={category:'Drag and Drop File Upload',formID:jQuery(dropArea).closest('form').attr('id')||'form.'+jQuery(dropArea).closest('form').attr('class').replace(/\s/g,'.'),fileInputID:jQuery(dropArea).find('input[type="file"]').attr('id'),};dropArea.addEventListener('dragover',function(e){e.stopPropagation();e.preventDefault();jQuery(dropArea).addClass('dragover');e.dataTransfer.dropEffect='copy';nebula.debounce(function(){thisEvent.action='Drag Over';nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.fileInputID)},500,'file drag over')});dropArea.addEventListener('dragleave',function(e){jQuery(dropArea).addClass('dragover');thisEvent.action='Drag Leave';nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.fileInputID)});dropArea.addEventListener('drop',function(e){e.stopPropagation();e.preventDefault();dropArea.classList.remove('dragover');var fileInput=dropArea.querySelectorAll('input[type="file"]')[0];var acceptedFiles=jQuery(fileInput).attr('accept').replace(/\s?\./g,'').split(',');var thisFileType=e.dataTransfer.files[0].type.replace(/\S+\//,'');thisEvent.fileType=thisFileType;thisEvent.file=e.dataTransfer.files[0];if(!jQuery(fileInput).attr('accept').length||(e.dataTransfer.files.length===1&&acceptedFiles.indexOf(thisFileType)!=-1)){jQuery(dropArea).addClass('dropped is-valid');fileInput.files=e.dataTransfer.files;thisEvent.action='Dropped (Accepted)';nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.fileType)}else{nebula.temporaryClass(jQuery(dropArea),'rejected','',1500);nebula.applyValidationClasses(jQuery(fileInput),'invalid',!0);thisEvent.action='Dropped (Rejected)';nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.fileType)}})})}};nebula.initBootstrapFunctions=function(){if(typeof bootstrap!=='undefined'){if(jQuery('[data-toggle="tooltip"]').length){jQuery('[data-toggle="tooltip"]').tooltip()}
if(jQuery('[data-toggle="popover"]').length){jQuery('[data-toggle="popover"]').popover()}
nebula.checkBootstrapToggleButtons();jQuery('[data-toggle=buttons] input').on('change',function(){nebula.checkBootstrapToggleButtons()});if(jQuery('.carousel').length){jQuery('.carousel').each(function(){if(jQuery(this).hasClass('auto-indicators')){var carouselID=jQuery(this).attr('id');var slideCount=jQuery(this).find('.carousel-item').length;var i=0;var markup='<ol class="carousel-indicators">';while(i<slideCount){var active=(i===0)?'class="active"':'';markup+='<li data-target="#'+carouselID+'" data-slide-to="'+i+'" '+active+'></li>';i++}
markup+='</ol>';jQuery(this).prepend(markup);jQuery(this).find('.carousel-item').first().addClass('active');if(!jQuery(this).find('.carousel-inner').length){jQuery(this).find('.carousel-item').wrapAll('<div class="carousel-inner">')}}
jQuery(this).carousel()})}
nebula.dom.document.on('show.bs.modal',function(e){if(jQuery(e.target).attr('data-animation-in')||jQuery(e.target).attr('data-animation')||jQuery(e.target).attr('data-animation-out')){var anim=jQuery(e.target).attr('data-animation-in')||jQuery(e.target).attr('data-animation')||'';if(!jQuery('#'+e.target.id+' .modal-dialog').attr('data-original-classes')){jQuery('#'+e.target.id+' .modal-dialog').attr('data-original-classes',jQuery('#'+e.target.id+' .modal-dialog').attr('class'))}
if(anim){var originalClasses=jQuery('#'+e.target.id+' .modal-dialog').attr('data-original-classes');jQuery('#'+e.target.id+' .modal-dialog').attr('class',originalClasses+' '+anim+' animate')}}});nebula.dom.document.on('hide.bs.modal',function(e){if(jQuery(e.target).attr('data-animation-in')||jQuery(e.target).attr('data-animation')||jQuery(e.target).attr('data-animation-out')){var anim=jQuery(e.target).attr('data-animation-out')||'';if(anim){var originalClasses=jQuery('#'+e.target.id+' .modal-dialog').attr('data-original-classes');jQuery('#'+e.target.id+' .modal-dialog').attr('class',originalClasses+' '+anim+' animate')}}})}};nebula.checkBootstrapToggleButtons=function(){jQuery('[data-toggle=buttons]').each(function(){if(jQuery(this).find('input:checked').length){jQuery(this).find('input').each(function(){if(jQuery(this).is(':checked')){jQuery(this).closest('.btn').removeClass('inactive')}else{jQuery(this).closest('.btn').addClass('inactive')}})}})};nebula.errorMitigation=function(){jQuery('img').on('error',function(){var thisImage=jQuery(this);var imagePath=thisImage.attr('src');if(imagePath.split('.').pop()==='svg'){var fallbackPNG=imagePath.replace('.svg','.png');jQuery.get(fallbackPNG).done(function(){thisImage.prop('src',fallbackPNG);thisImage.removeClass('svg')}).fail(function(){ga('send','exception',{'exDescription':'(JS) Broken Image: '+imagePath,'exFatal':!1});nebula.nv('event','Broken Image')})}else{ga('send','exception',{'exDescription':'(JS) Broken Image: '+imagePath,'exFatal':!1});nebula.nv('event','Broken Image')}})};nebula.svgImgs=function(){jQuery('img.svg').each(function(){var oThis=jQuery(this);if(oThis.attr('src').indexOf('.svg')>=1){jQuery.get(oThis.attr('src'),function(data){var theSVG=jQuery(data).find('svg');theSVG=theSVG.attr('id',oThis.attr('id'));theSVG=theSVG.attr('class',oThis.attr('class')+' replaced-svg');theSVG=theSVG.attr('role','img');theSVG=theSVG.attr('data-original-src',oThis.attr('src'));theSVG=theSVG.removeAttr('xmlns:a');oThis.replaceWith(theSVG);if(oThis.attr('alt')){theSVG.prepend('<title>'+oThis.attr('alt')+'</title>')}
if(oThis.attr('title')){theSVG.prepend('<description>'+oThis.attr('title')+'</description>')}},'xml')}})};nebula.scrollTo=function(element,scrollSpeed,offset,onlyWhenBelow,callback){if(!offset){var offset=nebula.scroll.offset||0}
var scrollPaddingTop=parseInt(nebula.dom.body.css('scroll-padding-top'),10);if(!isNaN(scrollPaddingTop)){offset=offset+scrollPaddingTop}
if(element){if(typeof element==='string'){element=jQuery(element)}
if(element.length){var willScroll=!0;if(onlyWhenBelow){var elementTop=element.offset().top-offset;var viewportTop=nebula.dom.document.scrollTop();if(viewportTop-elementTop<=0){willScroll=!1}}
if(willScroll){if(!scrollSpeed){var scrollSpeed=nebula.scroll.speed||500}
jQuery('html, body').animate({scrollTop:element.offset().top-offset},scrollSpeed,function(){nebula.focusOnElement(element);if(callback){callback()}})}}
return!1}
nebula.dom.document.on('click keyup','a[href*="#"]:not([href="#"])',function(e){if(e.type==='click'||(e.type==='keyup'&&(e.keyCode===32||e.keyCode===13))){var avoid='.no-scroll, .mm-menu, .carousel, .tab-content, .modal, [data-toggle], #wpadminbar, #query-monitor';if(!jQuery(this).is(avoid)&&!jQuery(this).parents(avoid).length){if(location.pathname.replace(/^\//,'')===this.pathname.replace(/^\//,'')&&location.hostname===this.hostname){var thisHash=this.hash;var target=jQuery(thisHash)||jQuery('[name='+thisHash.slice(1)+']');if(target.length){var pOffset=(jQuery(this).attr('offset'))?parseFloat(jQuery(this).attr('offset')):nebula.scroll.offset;var nOffset=Math.floor(target.offset().top-offset+pOffset)+jQuery('body').scrollTop();scrollSpeed=nebula.scroll.speed||500;jQuery('html, body').animate({scrollTop:nOffset},scrollSpeed,function(){nebula.focusOnElement(target);window.location.hash=thisHash});return!1}}}}});nebula.dom.document.on('click keyup','.nebula-scrollto',function(e){if(e.type==='click'||(e.type==='keyup'&&(e.keyCode===32||e.keyCode===13))){var pOffset=(jQuery(this).attr('offset'))?parseFloat(jQuery(this).attr('offset')):nebula.scroll.offset;if(jQuery(this).attr('scrollto')){var scrollElement=jQuery(this).attr('scroll-to');if(scrollElement!==''){scrollSpeed=nebula.scroll.speed||500;jQuery('html, body').animate({scrollTop:Math.floor(jQuery(scrollElement).offset().top-offset+pOffset)},scrollSpeed,function(){nebula.focusOnElement(scrollElement)})}}
return!1}})};nebula.temporaryClass=function(element,activeClass,inactiveClass,period){if(element&&activeClass){if(typeof element==='string'){element=jQuery(element)}
if(!inactiveClass){if(element.is('fa, fas, far, fab, fad')){inactiveClass=/fa-(?!fw)\S+/i.test(element.attr('class'))}else{inactiveClass=''}}
if(!period){period=1500}
element.removeClass(inactiveClass).addClass(activeClass+' temporary-status-active');setTimeout(function(){element.removeClass(activeClass+' temporary-status-active').addClass(inactiveClass)},period)}
return!1};nebula.focusOnElement=function(element){if(!element.length){return}
if(!element.is(':focusable')){element.attr('tabindex',-1).on('blur focusout',function(){jQuery(this).removeAttr('tabindex')})}
element.trigger('focus')};nebula.getQueryStrings=function(url,format){if(!url){url=document.URL}
if(!format){format='object'}
var queryString=url.split('?')[1];if(queryString){if(format==='string'){return'?'+queryString}
var queries={};var queryStrings=queryString.split('&');for(var i=0;i<queryStrings.length;i++){var hash=queryStrings[i].split('=');if(hash[1]){queries[hash[0]]=hash[1]}else{queries[hash[0]]=!0}}
return queries}
if(format==='string'){return''}
return!1};nebula.get=function(parameter,url){var queries=nebula.getQueryStrings(url);if(!parameter){return queries}
return queries[parameter]||!1};nebula.removeQueryParameter=function(keys,sourceURL){if(typeof keys==='string'){keys=[keys]}
var newURL;jQuery.each(keys,function(index,item){var url=sourceURL;if(typeof newURL!=='undefined'){url=newURL}
var baseURL=url.split('?')[0];var param;var params_arr=[];var queryString=(url.indexOf('?')!==-1)?url.split('?')[1]:'';if(queryString!==''){params_arr=queryString.split('&');for(i=params_arr.length-1;i>=0;i-=1){param=params_arr[i].split('=')[0];if(param===item){params_arr.splice(i,1)}}
newURL=baseURL+'?'+params_arr.join('&')}});if(typeof newURL!=='undefined'&&newURL.split('?')[1]===''){return newURL.split("?")[0]}
return newURL};nebula.reflow=function(selector){if(typeof selector==='string'){var element=jQuery(selector)}else if(typeof selector==='object'){var element=selector}else{return!1}
element.width()};nebula.animate=function(selector,newAnimationClasses,oldAnimationClasses){if(typeof selector==='string'){var element=jQuery(selector)}else if(typeof selector==='object'){var element=selector}else{return!1}
newAnimationClasses+=' animate';element.removeClass(newAnimationClasses);if(oldAnimationClasses){element.removeClass(oldAnimationClasses)}
nebula.reflow(element);element.addClass(newAnimationClasses)};nebula.animationTriggers=function(){jQuery('.ready').each(function(){nebula.loadAnimate(jQuery(this))});nebula.dom.window.on('load',function(){jQuery('.load').each(function(){nebula.loadAnimate(jQuery(this))})});nebula.dom.document.on('click','.click, [nebula-click]',function(){var animationClass=jQuery(this).attr('nebula-click')||'';nebula.animate(jQuery(this),animationClass)})};nebula.loadAnimate=function(oThis){var animationDelay=oThis.attr('nebula-delay');if(typeof animationDelay==='undefined'||animationDelay===0){nebula.animate(oThis,'load-animate')}else{setTimeout(function(){nebula.animate(oThis,'load-animate')},animationDelay)}};nebula.once=function(fn,args,unique){if(typeof nebula.onces==='undefined'){nebula.onces={}}
if(typeof args==='string'){unique=args;args=[]}
if(fn==='clear'||fn==='reset'){nebula.onces={}}
if(fn==='remove'){delete nebula.onces[unique]}
if(typeof fn==='function'){if(typeof nebula.onces[unique]==='undefined'||!nebula.onces[unique]){nebula.onces[unique]=!0;return fn.apply(this,args)}}else{unique=fn;if(typeof nebula.onces[unique]==='undefined'||!nebula.onces[unique]){nebula.onces[unique]=!0;return!0}else{return!1}}};nebula.debounce=function(callback,wait,uniqueID,immediate){if(typeof nebula.debounceTimers==="undefined"){nebula.debounceTimers={}}
if(!uniqueID){uniqueID="Don't call this twice without a uniqueID"}
var context=this;var args=arguments;var later=function(){nebula.debounceTimers[uniqueID]=null;if(!immediate){callback.apply(context,args)}};var callNow=immediate&&!nebula.debounceTimers[uniqueID];clearTimeout(nebula.debounceTimers[uniqueID]);nebula.debounceTimers[uniqueID]=setTimeout(later,wait);if(callNow){callback.apply(context,args)}};nebula.throttle=function(callback,cooldown,uniqueID){if(typeof nebula.throttleTimers==="undefined"){nebula.throttleTimers={}}
if(!uniqueID){uniqueID="Don't call this twice without a uniqueID"}
var context=this;var args=arguments;var later=function(){if(typeof nebula.throttleTimers[uniqueID]==='undefined'){callback.apply(context,args);nebula.throttleTimers[uniqueID]='waiting';setTimeout(function(){nebula.throttleTimers[uniqueID]=undefined},cooldown)}};return later()};nebula.createCookie=function(name,value,days){if(!days){var days=3650}
if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString()}else{var expires=""}
document.cookie=name+"="+value+expires+"; path=/;SameSite=Lax"};nebula.readCookie=function(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===' '){c=c.substring(1,c.length)}
if(c.indexOf(nameEQ)===0){return c.substring(nameEQ.length,c.length)}}
return null};nebula.eraseCookie=function(name){nebula.createCookie(name,"",-1)};nebula.timer=function(uniqueID,action,name){if(!window.performance){return!1}
if(typeof nebula.timings==='undefined'){nebula.timings=[]}
if(!uniqueID||uniqueID==='start'||uniqueID==='lap'||uniqueID==='end'){return!1}
if(!action){if(typeof nebula.timings[uniqueID]==='undefined'){action='start'}else{action='lap'}}
if(action!=='start'&&typeof nebula.timings[uniqueID]==='undefined'){return!1}
if(typeof nebula.timings[uniqueID]!=='undefined'&&nebula.timings[uniqueID].total>0){return nebula.timings[uniqueID].total}
var currentTime=performance.now();if(action==='start'&&typeof nebula.timings[uniqueID]==='undefined'){nebula.timings[uniqueID]={};nebula.timings[uniqueID].started=currentTime;nebula.timings[uniqueID].cumulative=0;nebula.timings[uniqueID].total=0;nebula.timings[uniqueID].lap=[];nebula.timings[uniqueID].laps=0;var thisLap={name:!1,started:currentTime,stopped:0,duration:0,progress:0,};nebula.timings[uniqueID].lap.push(thisLap);if(typeof name!=='undefined'){nebula.timings[uniqueID].lap[0].name=name}
if(typeof performance.measure!=='undefined'){performance.mark(uniqueID+'_start')}}else{var lapNumber=nebula.timings[uniqueID].lap.length;nebula.timings[uniqueID].lap[lapNumber-1].stopped=currentTime;nebula.timings[uniqueID].lap[lapNumber-1].duration=currentTime-nebula.timings[uniqueID].lap[lapNumber-1].started;nebula.timings[uniqueID].lap[lapNumber-1].progress=currentTime-nebula.timings[uniqueID].started;nebula.timings[uniqueID].cumulative=currentTime-nebula.timings[uniqueID].started;if(action==='start'){nebula.timings[uniqueID].lap[lapNumber-1].out=!0}else{nebula.timings[uniqueID].lap[lapNumber-1].out=!1}
if(action!=='end'){nebula.timings[uniqueID].laps++;if(lapNumber>0){nebula.timings[uniqueID].lap[lapNumber]={};nebula.timings[uniqueID].lap[lapNumber].started=nebula.timings[uniqueID].lap[lapNumber-1].stopped}
if(typeof name!=='undefined'){nebula.timings[uniqueID].lap[lapNumber].name=name}
if(typeof performance.measure!=='undefined'){var lapID=name||lapNumber;performance.mark(uniqueID+'_lap-'+lapID)}}
if(action==='end'){if(typeof performance.measure!=='undefined'){performance.mark(uniqueID+'_end');if(performance.getEntriesByName(uniqueID+'_start','mark')){performance.measure(uniqueID,uniqueID+'_start',uniqueID+'_end')}}
nebula.timings[uniqueID].stopped=currentTime;nebula.timings[uniqueID].total=currentTime-nebula.timings[uniqueID].started;return nebula.timings[uniqueID].total}else{if(!nebula.timings[uniqueID].lap[lapNumber-1].out){return nebula.timings[uniqueID].lap[lapNumber-1].duration}}}};nebula.millisecondsToString=function(ms){var milliseconds=parseInt((ms%1000)/100);var seconds=parseInt((ms/1000)%60);var minutes=parseInt((ms/(1000*60))%60);var hours=parseInt((ms/(1000*60*60))%24);var timeString='';if(hours>0){timeString+=hours+'h '}
if(minutes>0){timeString+=minutes+'m '}
if(seconds>0||milliseconds>0){timeString+=seconds;if(milliseconds>0){timeString+='.'+milliseconds}
timeString+='s'}
return timeString};nebula.timeAgo=function(timestamp,raw){if(typeof timestamp==='object'){console.warn('Pass date as string in the format: Fri Mar 27 21:40:02 +0000 2016')}
var postDate=new Date(timestamp);var currentTime=new Date();if(jQuery('.ie, .internet_explorer, .microsoft_edge').length){postDate=Date.parse(timestamp.replace(/( \+)/,' UTC$1'))}
var diff=Math.floor((currentTime-postDate)/1000);if(raw){return diff}
if(diff<=1){return"just now"}
if(diff<20){return diff+" seconds ago"}
if(diff<60){return"less than a minute ago"}
if(diff<=90){return"one minute ago"}
if(diff<=3540){return Math.round(diff/60)+" minutes ago"}
if(diff<=5400){return"1 hour ago"}
if(diff<=86400){return Math.round(diff/3600)+" hours ago"}
if(diff<=129600){return"1 day ago"}
if(diff<604800){return Math.round(diff/86400)+" days ago"}
if(diff<=777600){return"1 week ago"}
return"on "+timestamp};nebula.has=function(obj,prop){var parts=prop.split('.');for(var i=0,l=parts.length;i<l;i++){var part=parts[i];if(obj!==null&&typeof obj==="object"&&part in obj){obj=obj[part]}else{return!1}}
return!0};nebula.pre=function(){jQuery('pre.nebula-code').each(function(){if(!jQuery(this).parent('.nebula-code-con').length){var lang=jQuery(this).attr('class').replace('nebula-code','').trim();jQuery(this).addClass(lang.toLowerCase()).wrap('<div class="nebula-code-con clearfix '+lang.toLowerCase()+'"></div>');jQuery(this).closest('.nebula-code-con').prepend('<span class="nebula-code codetitle '+lang.toLowerCase()+'">'+lang+'</span>')}});if('clipboard' in navigator){jQuery('.nebula-code-con').each(function(){jQuery(this).append('<a href="#" class="nebula-selectcopy-code">Copy to Clipboard</a>');jQuery(this).find('p:empty').remove()});nebula.dom.document.on('click','.nebula-selectcopy-code',function(){oThis=jQuery(this);if(oThis.hasClass('error')){return!1}
var text=jQuery(this).closest('.nebula-code-con').find('pre').text();navigator.clipboard.writeText(text).then(function(){oThis.text('Copied!').removeClass('error').addClass('success');setTimeout(function(){oThis.text('Copy to clipboard').removeClass('success')},1500)}).catch(function(e){ga('send','exception',{'exDescription':'(JS) Clipboard API error: '+e.data,'exFatal':!1});oThis.text('Unable to copy.').addClass('error')});return!1})}};nebula.sanitize=function(text){return document.createElement('div').appendChild(document.createTextNode(text)).parentNode.innerHTML};nebula.defaultChosenOptions={disable_search_threshold:5,search_contains:!0,no_results_text:"No results found.",allow_single_deselect:!0,width:"100%"};nebula.initVideoTracking=function(){if(typeof nebula.videos==='undefined'){nebula.videos={}}
nebula.HTML5VideoTracking();nebula.youtubeTracking();nebula.vimeoTracking()};nebula.lazyVideoTracking=function(element){if(element.is('iframe[src*="youtube"]')){nebula.addYoutubePlayer(element.attr('id'),element)}else if(element.is('iframe[src*="vimeo"]')){nebula.createVimeoPlayers()}else if(element.is('video')){nebula.addHTML5VideoPlayer(element.attr('id'),element)}};nebula.HTML5VideoTracking=function(){jQuery('video').each(function(){var id=jQuery(this).attr('id');if(typeof nebula.videos[id]==='object'){return!1}
nebula.addHTML5VideoPlayer(id,jQuery(this))})};nebula.addHTML5VideoPlayer=function(id,element){var videoTitle=element.attr('title')||id||!1;if(!videoTitle){return!1}
nebula.videos[id]={};nebula.videos[id].platform='html5';nebula.videos[id].player=id;nebula.videos[id].title=videoTitle;nebula.videos[id].id=id;nebula.videos[id].element=element;nebula.videos[id].autoplay=(element.attr('autoplay'))?!0:!1;nebula.videos[id].percent=0;nebula.videos[id].seeker=!1;nebula.videos[id].seen=[];nebula.videos[id].watched=0;nebula.videos[id].watchedPercent=0;nebula.videos[id].pausedYet=!1;nebula.videos[id].current=0;element.on('loadedmetadata',function(){nebula.videos[id].current=this.currentTime;nebula.videos[id].duration=this.duration});element.on('play',function(){var thisVideo=nebula.videos[id];if('mediaSession' in navigator&&element.attr('title')){navigator.mediaSession.metadata=new MediaMetadata({title:element.attr('title'),artist:element.attr('artist')||'',album:element.attr('album')||'',})}
element.addClass('playing');if(!element.is('[autoplay]')){var thisEvent={category:'Videos',action:(nebula.isInView(element))?'Play':'Play (Not In View)',title:thisVideo.title,autoplay:thisVideo.autoplay};ga('set',nebula.analytics.metrics.videoStarts,1);ga('set',nebula.analytics.dimensions.videoWatcher,'Started');nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title,{'nonInteraction':thisEvent.autoplay});if(!thisVideo.autoplay){nebula.nv('event','Video Play Began: '+thisVideo.title)}}
nebula.dom.document.trigger('nebula_playing_video',thisVideo)});element.on('timeupdate',function(){var thisVideo=nebula.videos[id];thisVideo.current=this.currentTime;thisVideo.percent=thisVideo.current*100/thisVideo.duration;var nowSeen=Math.ceil(thisVideo.percent);if(thisVideo.seen.indexOf(nowSeen)<0){thisVideo.seen.push(nowSeen)}
thisVideo.watchedPercent=thisVideo.seen.length;thisVideo.watched=(thisVideo.seen.length/100)*thisVideo.duration;if(thisVideo.watchedPercent>25&&!thisVideo.engaged){if(nebula.isInView(element)){var thisEvent={category:'Videos',action:(thisVideo.autoplay)?'Engaged':'Engaged (Autoplay)',title:thisVideo.title,autoplay:thisVideo.autoplay};ga('set',nebula.analytics.dimensions.videoWatcher,thisEvent.action);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title,{'nonInteraction':!0});nebula.nv('event','Video Engagement: '+thisEvent.title);thisVideo.engaged=!0;nebula.dom.document.trigger('nebula_engaged_video',thisVideo)}}});element.on('pause',function(){var thisVideo=nebula.videos[id];element.removeClass('playing');var thisEvent={category:'Videos',action:'Paused',playTime:Math.round(thisVideo.watched),percent:Math.round(thisVideo.percent*100),progress:Math.round(thisVideo.current*1000),title:thisVideo.title,autoplay:thisVideo.autoplay};ga('set',nebula.analytics.dimensions.videoWatcher,thisEvent.action);ga('set',nebula.analytics.metrics.videoPlaytime,thisEvent.playTime);ga('set',nebula.analytics.dimensions.videoPercentage,thisEvent.percent);if(!thisVideo.pausedYet){ga('send','event',thisEvent.category,'First Pause',thisEvent.title);thisVideo.pausedYet=!0}
nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title);ga('send','timing',thisEvent.category,thisEvent.action,thisEvent.progress,thisEvent.title);nebula.nv('event','Video Paused: '+thisEvent.title);nebula.dom.document.trigger('nebula_paused_video',thisVideo)});element.on('seeked',function(){var thisVideo=nebula.videos[id];if(thisVideo.current==0&&element.is('[loop]')){if(element.is('[autoplay]')&&!element.is('[controls]')){return!1}
var thisEvent={category:'Videos',action:(nebula.isInView(element))?'Ended (Looped)':'Ended (Looped) (Not In View)',title:thisVideo.title,autoplay:thisVideo.autoplay};if(thisVideo.autoplay){thisEvent.action+=' (Autoplay)'}
nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title,{'nonInteraction':!0})}else{nebula.debounce(function(){var thisEvent={category:'Videos',action:'Seek',position:thisVideo.current.toFixed(0),title:thisVideo.title,autoplay:thisVideo.autoplay};ga('set',nebula.analytics.dimensions.videoWatcher,thisEvent.action);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title+' [to: '+thisEvent.position+']');nebula.nv('event','Video Seek: '+thisEvent.title);thisVideo.seeker=!0;nebula.dom.document.trigger('nebula_seeked_video',thisVideo)},250,'video seeking')}});element.on('volumechange',function(){var thisVideo=nebula.videos[id]});element.on('ended',function(){var thisVideo=nebula.videos[id];element.removeClass('playing');var thisEvent={category:'Videos',action:(nebula.isInView(element))?'Ended':'Ended (Not In View)',title:thisVideo.title,playTime:Math.round(thisVideo.watched),progress:Math.round(thisVideo.current*1000),autoplay:thisVideo.autoplay};if(thisVideo.autoplay){thisEvent.action+=' (Autoplay)'}
ga('set',nebula.analytics.metrics.videoCompletions,1);ga('set',nebula.analytics.metrics.videoPlaytime,thisEvent.playTime);ga('set',nebula.analytics.dimensions.videoWatcher,thisEvent.action);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title,{'nonInteraction':!0});ga('send','timing',thisEvent.category,thisEvent.action,thisEvent.progress,thisEvent.title);nebula.nv('event','Video Ended: '+thisEvent.title);nebula.dom.document.trigger('nebula_ended_video',thisVideo)})};nebula.youtubeTracking=function(){nebula.once(function(){if(jQuery('iframe[src*="youtube"], .lazy-youtube').length){var tag=document.createElement('script');tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}},'nebula youtube api')};function onYouTubeIframeAPIReady(e){window.performance.mark('nebula_loading_youtube_videos_start');jQuery('iframe[src*="youtube"]').each(function(i){if(!jQuery(this).hasClass('ignore')){var id=jQuery(this).attr('id');if(!id){id=jQuery(this).attr('src').split('?')[0].split('/').pop();jQuery(this).attr('id',id)}
if(jQuery(this).attr('src').indexOf('enablejsapi=1')>0){nebula.addYoutubePlayer(id,jQuery(this));nebula.dom.document.trigger('nebula_youtube_players_created',nebula.videos[id])}else{console.warn('The enablejsapi parameter was not found for this Youtube iframe. It has been reloaded to enable it. For better optimization, and more accurate analytics, add it to the iframe.');var delimiter=(jQuery(this).attr('src').indexOf('?')>0)?'&':'?';jQuery(this).attr('src',jQuery(this).attr('src')+delimiter+'enablejsapi=1').on('load',function(){nebula.addYoutubePlayer(id,jQuery(this));nebula.dom.document.trigger('nebula_youtube_players_created',nebula.videos[id])})}}});window.performance.mark('nebula_loading_youtube_videos_end');window.performance.measure('nebula_loading_youtube_videos','nebula_loading_youtube_videos_start','nebula_loading_youtube_videos_end');var pauseFlag=!1}
nebula.addYoutubePlayer=function(id,element){if(!id){return!1}
if(typeof YT!=='undefined'){nebula.videos[id]={player:new YT.Player(id,{events:{'onReady':nebulaYoutubeReady,'onStateChange':nebulaYoutubeStateChange,'onError':nebulaYoutubeError}}),platform:'youtube',element:element,autoplay:element.attr('src').indexOf('autoplay=1')>0,id:id,engaged:!1,watched:0,watchedPercent:0,pausedYet:0,}}};function nebulaYoutubeReady(e){if(typeof videoProgress==='undefined'){var videoProgress={}}
var id=nebula.getYoutubeID(e.target);if(id&&!nebula.videos[id]){nebula.videos[id]=nebula.videos[jQuery(e.target.getIframe()).attr('id')]}
nebula.videos[id].title=nebula.getYoutubeTitle(e.target);nebula.videos[id].duration=e.target.getDuration();nebula.videos[id].current=e.target.getCurrentTime();nebula.videos[id].percent=e.target.getCurrentTime()/e.target.getDuration()}
function nebulaYoutubeStateChange(e){var thisVideo=nebula.videos[nebula.getYoutubeID(e.target)];thisVideo.title=nebula.getYoutubeTitle(e.target);thisVideo.current=e.target.getCurrentTime();thisVideo.percent=thisVideo.current/thisVideo.duration;if(e.data===YT.PlayerState.PLAYING){var thisEvent={category:'Videos',action:(nebula.isInView(jQuery(thisVideo.element)))?'Play':'Play (Not In View)',title:thisVideo.title,autoplay:thisVideo.autoplay};ga('set',nebula.analytics.metrics.videoStarts,1);ga('set',nebula.analytics.dimensions.videoWatcher,'Started');if(thisVideo.autoplay){thisEvent.action+=' (Autoplay)'}else{jQuery(thisVideo.element).addClass('playing')}
nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title);nebula.nv('event','Video Play Began: '+thisEvent.title);nebula.dom.document.trigger('nebula_playing_video',thisVideo);var pauseFlag=!0;var updateInterval=500;var youtubePlayProgress=setInterval(function(){thisVideo.current=e.target.getCurrentTime();thisVideo.percent=thisVideo.current/thisVideo.duration;thisVideo.watched=thisVideo.watched+(updateInterval/1000);thisVideo.watchedPercent=(thisVideo.watched)/thisVideo.duration;if(thisVideo.watchedPercent>0.25&&!thisVideo.engaged){if(nebula.isInView(jQuery(thisVideo.element))){var thisEvent={category:'Videos',action:(thisVideo.autoplay)?'Engaged':'Engaged (Autoplay)',title:thisVideo.title,autoplay:thisVideo.autoplay};ga('set',nebula.analytics.dimensions.videoWatcher,thisEvent.action);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title,{'nonInteraction':!0});nebula.nv('event','Video Engaged: '+thisEvent.title);thisVideo.engaged=!0;nebula.dom.document.trigger('nebula_engaged_video',thisVideo)}}},updateInterval)}
if(e.data===YT.PlayerState.ENDED){jQuery(thisVideo.element).removeClass('playing');clearInterval(youtubePlayProgress);var thisEvent={category:'Videos',action:(nebula.isInView(jQuery(thisVideo.element)))?'Ended':'Ended (Not In View)',title:thisVideo.title,playTime:Math.round(thisVideo.watched/1000),progress:thisVideo.current*1000,autoplay:thisVideo.autoplay};if(thisVideo.autoplay){thisEvent.action+=' (Autoplay)'}
ga('set',nebula.analytics.metrics.videoCompletions,1);ga('set',nebula.analytics.metrics.videoPlaytime,thisEvent.playTime);ga('set',nebula.analytics.dimensions.videoWatcher,thisEvent.action);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title,{'nonInteraction':!0});ga('send','timing',thisEvent.category,thisEvent.action,thisEvent.progress,thisEvent.title);nebula.nv('event','Video Ended: '+thisEvent.title);nebula.dom.document.trigger('nebula_ended_video',thisVideo)}else{setTimeout(function(){if(e.target.getPlayerState()==2&&pauseFlag){jQuery(thisVideo.element).removeClass('playing');clearInterval(youtubePlayProgress);var thisEvent={category:'Videos',action:'Paused',playTime:Math.round(thisVideo.watched),percent:Math.round(thisVideo.percent*100),progress:thisVideo.current*1000,title:thisVideo.title,autoplay:thisVideo.autoplay};ga('set',nebula.analytics.metrics.videoPlaytime,Math.round(thisVideo.watched));ga('set',nebula.analytics.dimensions.videoPercentage,Math.round(thisVideo.percent*100));ga('set',nebula.analytics.dimensions.videoWatcher,thisEvent.action);if(!thisVideo.pausedYet){ga('send','event',thisEvent.category,'First Pause',thisEvent.title);thisVideo.pausedYet=!0}
nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title);ga('send','timing',thisEvent.category,thisEvent.action,thisEvent.progress,thisEvent.title);nebula.nv('event','Video Paused: '+thisEvent.title);nebula.dom.document.trigger('nebula_paused_video',thisVideo);pauseFlag=!1}},1000)}}
function nebulaYoutubeError(e){var thisVideo=nebula.videos[nebula.getYoutubeID(e.target)];thisVideo.title=nebula.getYoutubeTitle(e.target);ga('send','exception',{'exDescription':'(JS) Youtube API error for '+thisVideo.title+': '+e.data,'exFatal':!1});nebula.nv('event','Youtube API Error')}
nebula.getYoutubeID=function(target){var id;if(target.getVideoData){id=target.getVideoData().id||target.getVideoData().video_id}
if(!id){if(target.getDebugText){id=JSON.parse(target.getDebugText()).debug_videoId}else{id=nebula.get('v',target.getVideoUrl())||jQuery(target.getIframe()).attr('src').split('?')[0].split('/').pop()||jQuery(target.getIframe()).attr('id')}}
return id};nebula.getYoutubeTitle=function(target){var videoTitle;if(target.getVideoData){videoTitle=target.getVideoData().title}
return videoTitle||jQuery(target.getIframe()).attr('title')||nebula.getYoutubeID(target)||!1};nebula.vimeoTracking=function(){if(jQuery('iframe[src*="vimeo"], .lazy-vimeo').length){nebula.loadJS(nebula.site.resources.scripts.nebula_vimeo,function(){nebula.createVimeoPlayers()})}};nebula.createVimeoPlayers=function(){jQuery('iframe[src*="vimeo"]').each(function(i){if(!jQuery(this).hasClass('ignore')){var id=jQuery(this).attr('data-video-id')||jQuery(this).attr('data-vimeo-id')||jQuery(this).attr('id')||!1;if(!id){if(jQuery(this).attr('src').indexOf('player_id')>-1){id=jQuery(this).attr('src').split('player_id=').pop().split('&')[0]}else{id=jQuery(this).attr('src').split('/').pop().split('?')[0]}
if(id&&!parseInt(id)){id=/\d{6,}/g.exec(jQuery(this).attr('src'))[0]}
jQuery(this).attr('id',id)}
if(typeof nebula.videos[id]==='object'){return}
nebula.videos[id]={player:new Vimeo.Player(jQuery(this)),element:jQuery(this),platform:'vimeo',autoplay:jQuery(this).attr('src').indexOf('autoplay=1')>0,id:id,current:0,percent:0,engaged:!1,seeker:!1,seen:[],watched:0,watchedPercent:0,pausedYet:!1,};nebula.videos[id].player.getVideoTitle().then(function(title){nebula.videos[id].title=title});nebula.videos[id].player.getDuration().then(function(duration){nebula.videos[id].duration=duration});nebula.videos[id].player.on('play',function(e){var thisEvent={category:'Videos',action:(nebula.isInView(jQuery(nebula.videos[id].element)))?'Play':'Play (Not In View)',title:nebula.videos[id].title,autoplay:nebula.videos[id].autoplay};ga('set',nebula.analytics.metrics.videoStarts,1);ga('set',nebula.analytics.dimensions.videoWatcher,'Started');if(nebula.videos[id].autoplay){thisEvent.action+=' (Autoplay)'}else{nebula.videos[id].element.addClass('playing')}
nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title);nebula.nv('event','Video Play Began: '+thisEvent.title);nebula.dom.document.trigger('nebula_playing_video',nebula.videos[id].title)});nebula.videos[id].player.on('timeupdate',function(e){nebula.videos[id].duration=e.duration;nebula.videos[id].current=e.seconds;nebula.videos[id].percent=e.percent;nowSeen=Math.ceil(nebula.videos[id].percent*100);if(nebula.videos[id].seen.indexOf(nowSeen)<0){nebula.videos[id].seen.push(nowSeen)}
nebula.videos[id].watchedPercent=nebula.videos[id].seen.length;nebula.videos[id].watched=(nebula.videos[id].seen.length/100)*nebula.videos[id].duration;if(nebula.videos[id].watchedPercent>25&&!nebula.videos[id].engaged){if(nebula.isInView(jQuery(nebula.videos[id].element))){var thisEvent={category:'Videos',action:(nebula.videos[id].autoplay)?'Engaged':'Engaged (Autoplay)',title:nebula.videos[id].title,autoplay:nebula.videos[id].autoplay};ga('set',nebula.analytics.dimensions.videoWatcher,thisEvent.action);nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title,{'nonInteraction':!0});nebula.nv('event','Video Engaged: '+thisEvent.title);nebula.videos[id].engaged=!0;nebula.dom.document.trigger('nebula_engaged_video',nebula.videos[id].title)}}});nebula.videos[id].player.on('pause',function(e){jQuery(this).removeClass('playing');var thisEvent={category:'Videos',action:'Paused',playTime:Math.round(nebula.videos[id].watched),percent:Math.round(e.percent*100),title:nebula.videos[id].title,autoplay:nebula.videos[id].autoplay};ga('set',nebula.analytics.dimensions.videoWatcher,thisEvent.action);ga('set',nebula.analytics.metrics.videoPlaytime,thisEvent.playTime);ga('set',nebula.analytics.dimensions.videoPercentage,thisEvent.percent);if(!nebula.videos[id].pausedYet&&!nebula.videos[id].seeker){ga('send','event',thisEvent.category,'First Pause',thisEvent.title);nebula.videos[id].pausedYet=!0}
nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title);ga('send','timing',thisEvent.category,thisEvent.action,Math.round(e.seconds*1000),thisEvent.title);nebula.nv('event','Video Paused: '+thisEvent.title);nebula.dom.document.trigger('nebula_paused_video',nebula.videos[id])});nebula.videos[id].player.on('seeked',function(e){var thisEvent={category:'Videos',action:'Seek',position:e.seconds,title:nebula.videos[id].title,autoplay:nebula.videos[id].autoplay};nebula.dom.document.trigger('nebula_event',thisEvent);ga('set',nebula.analytics.dimensions.videoWatcher,thisEvent.action);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title+' [to: '+thisEvent.position+']');nebula.nv('event','Video Seeked: '+thisEvent.title);nebula.videos[id].seeker=!0;nebula.dom.document.trigger('nebula_seeked_video',nebula.videos[id])});nebula.videos[id].player.on('ended',function(e){jQuery(this).removeClass('playing');var thisEvent={category:'Videos',action:(nebula.isInView(jQuery(nebula.videos[id].element)))?'Ended':'Ended (Not In View)',title:nebula.videos[id].title,playTime:Math.round(nebula.videos[id].watched),progress:Math.round(nebula.videos[id].watched*1000),autoplay:nebula.videos[id].autoplay};ga('set',nebula.analytics.metrics.videoCompletions,1);ga('set',nebula.analytics.metrics.videoPlaytime,thisEvent.playTime);ga('set',nebula.analytics.dimensions.videoWatcher,thisEvent.action);if(nebula.videos[id].autoplay){thisEvent.action+=' (Autoplay)'}
nebula.dom.document.trigger('nebula_event',thisEvent);ga('send','event',thisEvent.category,thisEvent.action,thisEvent.title,{'nonInteraction':!0});ga('send','timing',thisEvent.category,thisEvent.action,thisEvent.progress,thisEvent.title);nebula.nv('event','Video Ended: '+thisEvent.title);nebula.dom.document.trigger('nebula_ended_video',nebula.videos[id])});nebula.dom.document.trigger('nebula_vimeo_player_created',nebula.videos[id])}});if(typeof videoProgress==='undefined'){videoProgress={}}};nebula.pauseAllVideos=function(force){if(typeof nebula.videos==='undefined'){return!1}
if(force==='null'){force=!1}
jQuery.each(nebula.videos,function(){if(this.platform==='html5'){if((force||!jQuery(this.element).hasClass('ignore-visibility'))){jQuery(this.element)[0].pause()}}
if(this.platform==='youtube'){if((force||!jQuery(this.element).hasClass('ignore-visibility'))){this.player.pauseVideo()}}
if(this.platform==='vimeo'){if((force||!jQuery(this.element).hasClass('ignore-visibility'))){this.player.pause()}}})};nebula.desktopNotification=function(title,message,clickCallback,showCallback,closeCallback,errorCallback){if(nebula.checkNotificationPermission()){var defaults={dir:"auto",lang:"en-US",body:"",tag:Math.floor(Math.random()*10000)+1,icon:nebula.site.directory.template.uri+"/assets/img/meta/android-chrome-192x192.png"};if(typeof message==="undefined"){var message=defaults}else if(typeof message==="string"){var body=message;message=defaults;message.body=body}else{if(typeof message.dir==="undefined"){message.dir=defaults.dir}
if(typeof message.lang==="undefined"){message.lang=defaults.lang}
if(typeof message.body==="undefined"){message.body=defaults.lang}
if(typeof message.tag==="undefined"){message.tag=defaults.tag}
if(typeof message.icon==="undefined"){message.icon=defaults.icon}}
var instance=new Notification(title,message);if(clickCallback){instance.onclick=function(){clickCallback()}}
if(showCallback){instance.onshow=function(e){showCallback()}}else{instance.onshow=function(e){setTimeout(function(){instance.close()},20000)}}
if(closeCallback){instance.onclose=function(){closeCallback()}}
if(errorCallback){instance.onerror=function(){ga('send','exception',{'exDescription':'(JS) Desktop Notification error','exFatal':!1});errorCallback()}}}
return!1};nebula.checkNotificationPermission=function(){Notification=window.Notification||window.mozNotification||window.webkitNotification;if(!(Notification)){return!1}else if(Notification.permission==="granted"){return!0}else if(Notification.permission!=='denied'){Notification.requestPermission(function(permission){if(!('permission' in Notification)){Notification.permission=permission}
if(permission==='granted'){return!0}})}
return!1};nebula.vibrate=function(pattern){if(typeof pattern!=='object'){pattern=[100,200,100,100,75,25,100,200,100,500,100,200,100,500]}
if(navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate){navigator.vibrate(pattern)}
return!1};nebula.mmenus=function(){if('mmenu' in jQuery){var mobileNav=jQuery('#mobilenav');var mobileNavTriggerIcon=jQuery('a.mobilenavtrigger i');if(mobileNav.length){var navPanels={};if(jQuery('#utility-panel').length){navPanels={position:"top",type:"tabs",content:["<a href='#main-panel'>Main Menu</a>","<a href='#utility-panel'>Other Links</a>"]}}
var footerIconLinks={};if(nebula.has(nebula,'site.options')){footerIconLinks={position:"bottom",content:[]};if(nebula.site.options.facebook_url){footerIconLinks.content.push('<a href="'+nebula.site.options.facebook_url+'" target="_blank" rel="noopener"><i class="fab fa-facebook"></i></a>')}
if(nebula.site.options.twitter_url){footerIconLinks.content.push('<a href="'+nebula.site.options.twitter_url+'" target="_blank" rel="noopener"><i class="fab fa-twitter"></i></a>')}
if(nebula.site.options.instagram_url){footerIconLinks.content.push('<a href="'+nebula.site.options.instagram+'" target="_blank" rel="noopener"><i class="fab fa-instagram"></i></a>')}
if(nebula.site.options.linkedin_url){footerIconLinks.content.push('<a href="'+nebula.site.options.linkedin_url+'" target="_blank" rel="noopener"><i class="fab fa-linkedin"></i></a>')}
if(nebula.site.options.youtube_url){footerIconLinks.content.push('<a href="'+nebula.site.options.youtube_url+'" target="_blank" rel="noopener"><i class="fab fa-youtube"></i></a>')}
if(nebula.site.options.pinterest_url){footerIconLinks.content.push('<a href="'+nebula.site.options.pinterest_url+'" target="_blank" rel="noopener"><i class="fab fa-pinterest"></i></a>')}
if(footerIconLinks.content.length>0){footerIconLinks.content.splice(0,0,'<a href="'+nebula.site.home_url+'"><i class="fas fa-home"></i></a>')}}
mobileNav.mmenu({navbars:[{position:"top",content:["searchfield"],},navPanels,footerIconLinks],searchfield:{add:!0,search:!0,placeholder:'Search',noResults:"No navigation items found.",showSubPanels:!1,showTextItems:!1,resultsPanel:!0,},counters:!0,iconPanels:!0,backButton:{close:!0},extensions:["position-back","position-left","theme-light","shadow-page","shadow-panels","listview-huge","multiline"],},{offCanvas:{page:{selector:"#body-wrapper"}},classNames:{selected:"current-menu-item"},searchfield:{clear:!0,form:{method:"get",action:nebula.site.home_url,},input:{name:"s",}}});if(mobileNav.length){mobileNav.data('mmenu').bind('open:start',function($panel){mobileNavTriggerIcon.removeClass('fa-bars').addClass('fa-times');if(typeof jQuery.tooltip!=='undefined'){jQuery('[data-toggle="tooltip"]').tooltip('hide')}
nebula.timer('mmenu','start')}).bind('close:start',function($panel){mobileNavTriggerIcon.removeClass('fa-times').addClass('fa-bars');ga('send','timing','Mmenu','Closed',Math.round(nebula.timer('mmenu','lap')),'From opening mmenu until closing mmenu')})}
nebula.dom.document.on('click','.mm-menu li a:not(.mm-next)',function(){ga('send','timing','Mmenu','Navigated',Math.round(nebula.timer('mmenu','lap')),'From opening mmenu until navigation')})}}};nebula.subnavExpanders=function(){if(nebula.site.options.sidebar_expanders&&jQuery('#sidebar-section .menu').length){jQuery('#sidebar-section .menu li.menu-item:has(ul)').addClass('has-expander').append('<a class="toplevelvert_expander closed" href="#"><i class="fas fa-caret-left"></i> <span class="sr-only">Expand</span></a>');jQuery('.toplevelvert_expander').parent().children('.sub-menu').hide();nebula.dom.document.on('click','.toplevelvert_expander',function(){jQuery(this).toggleClass('closed open').parent().children('.sub-menu').slideToggle();return!1});jQuery('.current-menu-ancestor').children('.toplevelvert_expander').click();jQuery('.current-menu-item').children('.toplevelvert_expander').click()}};nebula.domTreeToString=function(element){if(typeof element==='string'){element=jQuery(element)}
if(element.nodeType){element=jQuery(element)}
var selector=element.parents().map(function(){var parentTag=this.tagName.toLowerCase();var parentID=jQuery(this).attr('id');if(parentID){parentTag+='#'+parentID}
return parentTag}).get().reverse().concat([this.nodeName]).join(' > ');selector+=element.get(0).tagName.toLowerCase();var id=element.attr('id');if(id){selector+='#'+id}
var classNames=element.attr('class');if(classNames){selector+='.'+classNames.trim().replace(/\s/gi,'.')}
return selector};function isGoogleAnalyticsReady(){return!0}
jQuery.expr.pseudos.Contains=function(element,index,match){return(element.textContent||element.innerText||'').toUpperCase().indexOf(match[3].toUpperCase())>=0};jQuery.expr.pseudos.focusable=function(element,index,match){return jQuery(element).is(':input:enabled, a[href], area[href], object, [tabindex]')&&!jQuery(element).is(':hidden')};function preg_quote(str,delimiter){return(str+'').replace(new RegExp('[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\'+(delimiter||'')+'-]','g'),'\\$&')}
function strtotime(e,t){var a,n,r,s,u,i,o,w,c,d,D,g=!1;if(!e)return g;e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase();var l=new RegExp(["^(\\d{1,4})","([\\-\\.\\/:])","(\\d{1,2})","([\\-\\.\\/:])","(\\d{1,4})","(?:\\s(\\d{1,2}):(\\d{2})?:?(\\d{2})?)?","(?:\\s([A-Z]+)?)?$"].join(""));if((n=e.match(l))&&n[2]===n[4])if(n[1]>1901)switch(n[2]){case"-":return n[3]>12||n[5]>31?g:new Date(n[1],parseInt(n[3],10)-1,n[5],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3;case".":return g;case"/":return n[3]>12||n[5]>31?g:new Date(n[1],parseInt(n[3],10)-1,n[5],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3}else if(n[5]>1901)switch(n[2]){case"-":case".":return n[3]>12||n[1]>31?g:new Date(n[5],parseInt(n[3],10)-1,n[1],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3;case"/":return n[1]>12||n[3]>31?g:new Date(n[5],parseInt(n[1],10)-1,n[3],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3}else switch(n[2]){case"-":return n[3]>12||n[5]>31||n[1]<70&&n[1]>38?g:(s=n[1]>=0&&n[1]<=38?+n[1]+2e3:n[1],new Date(s,parseInt(n[3],10)-1,n[5],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3);case".":return n[5]>=70?n[3]>12||n[1]>31?g:new Date(n[5],parseInt(n[3],10)-1,n[1],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3:n[5]<60&&!n[6]?n[1]>23||n[3]>59?g:(r=new Date,new Date(r.getFullYear(),r.getMonth(),r.getDate(),n[1]||0,n[3]||0,n[5]||0,n[9]||0)/1e3):g;case"/":return n[1]>12||n[3]>31||n[5]<70&&n[5]>38?g:(s=n[5]>=0&&n[5]<=38?+n[5]+2e3:n[5],new Date(s,parseInt(n[1],10)-1,n[3],n[6]||0,n[7]||0,n[8]||0,n[9]||0)/1e3);case":":return n[1]>23||n[3]>59||n[5]>59?g:(r=new Date,new Date(r.getFullYear(),r.getMonth(),r.getDate(),n[1]||0,n[3]||0,n[5]||0)/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(a=Date.parse(e)))return a/1e3|0;if(l=new RegExp(["^([0-9]{4}-[0-9]{2}-[0-9]{2})","[ t]","([0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]+)?)","([\\+-][0-9]{2}(:[0-9]{2})?|z)"].join("")),(n=e.match(l))&&("z"===n[4]?n[4]="Z":n[4].match(/^([+-][0-9]{2})$/)&&(n[4]=n[4]+":00"),!isNaN(a=Date.parse(n[1]+"T"+n[2]+n[4]))))return a/1e3|0;function f(e){var t,a,n,r,s=e.split(" "),w=s[0],c=s[1].substring(0,3),d=/\d+/.test(w),D="ago"===s[2],g=("last"===w?-1:1)*(D?-1:1);if(d&&(g*=parseInt(w,10)),o.hasOwnProperty(c)&&!s[1].match(/^mon(day|\.)?$/i))return u["set"+o[c]](u["get"+o[c]]()+g);if("wee"===c)return u.setDate(u.getDate()+7*g);if("next"===w||"last"===w)t=w,a=g,void 0!==(r=i[c])&&(0==(n=r-u.getDay())?n=7*a:n>0&&"last"===t?n-=7:n<0&&"next"===t&&(n+=7),u.setDate(u.getDate()+n));else if(!d)return!1;return!0}if(u=t?new Date(1e3*t):new Date,i={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},o={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},d="([+-]?\\d+\\s"+(c="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)")+"|(last|next)\\s"+c+")(\\sago)?",!(n=e.match(new RegExp(d,"gi"))))return g;for(D=0,w=n.length;D<w;D++)if(!f(n[D]))return g;return u.getTime()/1e3};

}
catch(e){console.error("An error has occurred: "+e.stack);}
